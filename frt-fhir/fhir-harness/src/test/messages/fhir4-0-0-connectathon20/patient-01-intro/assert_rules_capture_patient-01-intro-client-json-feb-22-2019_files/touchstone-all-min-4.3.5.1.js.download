(function(c){c.fn.emulateTransitionEnd=function(b){var d=!1,f=this;c(this).one("mmTransitionEnd",function(){d=!0});setTimeout(function(){d||c(f).trigger(a.end)},b);return this};var a=function(){var a=document.createElement("mm"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},b;for(b in c)if(void 0!==a.style[b])return{end:c[b]};return!1}();a&&(c.event.special.mmTransitionEnd={bindType:a.end,delegateType:a.end,
handle:function(a){if(c(a.target).is(this))return a.handleObj.handler.apply(this,arguments)}});var b=function(a,d){this.$element=c(a);this.options=c.extend({},b.DEFAULTS,d);this.transitioning=null;this.init()};b.TRANSITION_DURATION=350;b.DEFAULTS={toggle:!0,doubleTapToGo:!1,activeClass:"active",collapseClass:"collapse",collapseInClass:"in",collapsingClass:"collapsing"};b.prototype.init=function(){var a=this,b=this.options.activeClass,d=this.options.collapseClass,h=this.options.collapseInClass;this.$element.find("li."+
b).has("ul").children("ul").attr("aria-expanded",!0).addClass(d+" "+h);this.$element.find("li").not("."+b).has("ul").children("ul").attr("aria-expanded",!1).addClass(d);this.options.doubleTapToGo&&this.$element.find("li."+b).has("ul").children("a").addClass("doubleTapToGo");this.$element.find("li").has("ul").children("a").on("click.metisMenu",function(d){var f=c(this),h=f.parent("li"),q=h.children("ul");f.hasClass("navigateTo")||d.preventDefault();h.hasClass(b)&&!a.options.doubleTapToGo?(a.hide(q),
f.attr("aria-expanded",!1)):(f.hasClass("navigateTo")||a.show(q),f.attr("aria-expanded",!0));a.options.doubleTapToGo&&a.doubleTapToGo(f)&&"#"!==f.attr("href")&&""!==f.attr("href")&&(d.stopPropagation(),document.location=f.attr("href"))})};b.prototype.doubleTapToGo=function(a){var c=this.$element;if(a.hasClass("doubleTapToGo"))return a.removeClass("doubleTapToGo"),!0;if(a.parent().children("ul").length)return c.find(".doubleTapToGo").removeClass("doubleTapToGo"),a.addClass("doubleTapToGo"),!1};b.prototype.show=
function(d){var e=this.options.activeClass,f=this.options.collapseClass,h=this.options.collapseInClass,l=this.options.collapsingClass,k=c(d);d=k.parent("li");if(!this.transitioning&&!k.hasClass(h)){d.addClass(e);this.options.toggle&&this.hide(d.siblings().children("ul."+h).attr("aria-expanded",!1));k.removeClass(f).addClass(l).height(0);this.transitioning=1;e=function(){k.removeClass(l).addClass(f+" "+h).height("").attr("aria-expanded",!0);this.transitioning=0};if(!a)return e.call(this);k.one("mmTransitionEnd",
c.proxy(e,this)).emulateTransitionEnd(b.TRANSITION_DURATION).height(k[0].scrollHeight)}};b.prototype.hide=function(d){var e=this.options.activeClass,f=this.options.collapseClass,h=this.options.collapseInClass,l=this.options.collapsingClass,k=c(d);if(!this.transitioning&&k.hasClass(h)){k.parent("li").removeClass(e);k.height(k.height())[0].offsetHeight;k.addClass(l).removeClass(f).removeClass(h);this.transitioning=1;d=function(){this.transitioning=0;k.removeClass(l).addClass(f).attr("aria-expanded",
!1)};if(!a)return d.call(this);k.height(0).one("mmTransitionEnd",c.proxy(d,this)).emulateTransitionEnd(b.TRANSITION_DURATION)}};var d=c.fn.metisMenu;c.fn.metisMenu=function(a){return this.each(function(){var d=c(this),f=d.data("mm"),h=c.extend({},b.DEFAULTS,d.data(),"object"===typeof a&&a);f||d.data("mm",f=new b(this,h));if("string"===typeof a)f[a]()})};c.fn.metisMenu.Constructor=b;c.fn.metisMenu.noConflict=function(){c.fn.metisMenu=d;return this}})(jQuery);var _canLog=!1;
function _log(c,a){if(_canLog){var b=Array.prototype.slice.apply(arguments,[1]),d=new Date,d=d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()+"."+d.getMilliseconds();b[0]=d+" - "+b[0];try{switch(c){case "info":window.console.info.apply(window.console,b);break;case "warn":window.console.warn.apply(window.console,b);break;default:window.console.log.apply(window.console,b)}}catch(g){window.console?-2146827850===g.number&&window.console.log(b.join(", ")):_canLog=!1}}}
function logMsg(c){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)}var getDynaTreePersistData=null,DTNodeStatus_Error=-1,DTNodeStatus_Loading=1,DTNodeStatus_Ok=0;
(function(c){function a(a,c){var b=(""+a).split("."),d=(""+c).split("."),e=Math.min(b.length,d.length),f,g,h;for(h=0;h<e;h++)if(f=parseInt(b[h],10),g=parseInt(d[h],10),isNaN(f)&&(f=b[h]),isNaN(g)&&(g=d[h]),f!=g)return f>g?1:f<g?-1:NaN;return b.length===d.length?0:b.length<d.length?-1:1}function b(a){var n=a.options.dnd||null;n&&(n.onDragStart||n.onDrop)&&m();n&&n.onDragStart&&a.$tree.draggable({addClasses:!1,appendTo:"body",containment:!1,delay:0,distance:4,revert:!0!==n.revert?!1:function(a){logMsg("draggable.revert(), dropped\x3d",
a);return"boolean"===typeof a?!a:(a=c.ui.ddmanager&&c.ui.ddmanager.current&&c.ui.ddmanager.current.helper)&&a.hasClass("dynatree-drop-reject")},scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToDynatree:!0,helper:function(a){var q=c.ui.dynatree.getNode(a.target);return q?q.tree._onDragEvent("helper",q,null,a,null,null):"\x3cdiv\x3e\x3c/div\x3e"},start:function(a,c){return!!c.helper.data("dtSourceNode")}});n&&n.onDrop&&a.$tree.droppable({addClasses:!1,tolerance:"pointer",greedy:!1})}var d={create:function(){return function(){this.initialize.apply(this,
arguments)}}},g=function(){var a,c,b;a=navigator.userAgent;a=a.toLowerCase();c=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];a=c[1]||"";c=c[2]||"0";b={};a&&(b[a]=!0,b.version=c);b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0);return b}(),e=0<=a(c.ui.version,"1.9"),f=d.create();f.prototype={initialize:function(a,n,b){this.parent=a;this.tree=
n;"string"===typeof b&&(b={title:b});b.key=null==b.key?"_"+n._nodeCount++:""+b.key;this.data=c.extend({},c.ui.dynatree.nodedatadefaults,b);this.childList=this.ul=this.span=this.li=null;this.bSelected=this.bExpanded=this.hasSubSel=this._isLoading=!1},toString:function(){return"DynaTreeNode\x3c"+this.data.key+"\x3e: '"+this.data.title+"'"},toDict:function(a,n){var b,d=c.extend({},this.data);d.activate=this.tree.activeNode===this;d.focus=this.tree.focusNode===this;d.expand=this.bExpanded;d.select=this.bSelected;
n&&n(d);if(a&&this.childList){d.children=[];for(var e=0,f=this.childList.length;e<f;e++)b=this.childList[e],b.isStatusNode()||d.children.push(b.toDict(!0,n))}else delete d.children;return d},fromDict:function(a){var n=a.children;void 0===n?(this.data=c.extend(this.data,a),this.render()):(a=c.extend({},a),a.children=void 0,this.data=c.extend(this.data,a),this.removeChildren(),this.addChild(n))},_getInnerHtml:function(){var a=this.tree,c=a.options,b=a.cache,d=this.getLevel(),e=this.data,f="";d<c.minExpandLevel?
1<d&&(f+=b.tagConnector):f=!1!==this.hasChildren()?f+b.tagExpander:f+b.tagConnector;c.checkbox&&!0!==e.hideCheckbox&&!e.isStatusNode&&(f+=b.tagCheckbox);e.icon?(b="/"===e.icon.charAt(0)?e.icon:c.imagePath+e.icon,f+="\x3cimg src\x3d'"+b+"' alt\x3d'' /\x3e"):!1!==e.icon&&(f=e.iconClass?f+("\x3cspan class\x3d' "+e.iconClass+"'\x3e\x3c/span\x3e"):f+b.tagNodeIcon);b="";c.onCustomRender&&(b=c.onCustomRender.call(a,this)||"");b||(a=e.tooltip?' title\x3d"'+e.tooltip.replace(/\"/g,"\x26quot;")+'"':"",b=e.href||
"#",b=c.noLink||e.noLink?'\x3cspan style\x3d"display:inline-block;" class\x3d"'+c.classNames.title+'"'+a+"\x3e"+e.title+"\x3c/span\x3e":'\x3ca href\x3d"'+b+'" class\x3d"'+c.classNames.title+'"'+a+"\x3e"+e.title+"\x3c/a\x3e");return f+b},_fixOrder:function(){var a=this.childList;if(a&&this.ul)for(var c=this.ul.firstChild,b=0,d=a.length-1;b<d;b++){var e=a[b],f=c.dtnode;e!==f?(this.tree.logDebug("_fixOrder: mismatch at index "+b+": "+e+" !\x3d "+f),this.ul.insertBefore(e.li,f.li)):c=c.nextSibling}},
render:function(a,b){var d=this.tree,e=this.parent,f=this.data,g=d.options,h=g.classNames,p=this.isLastSibling(),k=!1;if(!e&&!this.ul)this.li=this.span=null,this.ul=document.createElement("ul"),this.ul.className=1<g.minExpandLevel?h.container+" "+h.noConnector:h.container;else if(e){this.li||(k=!0,this.li=document.createElement("li"),this.li.dtnode=this,f.key&&g.generateIds&&(this.li.id=g.idPrefix+f.key),this.span=document.createElement("span"),this.span.className=h.title,this.li.appendChild(this.span),
e.ul||(e.ul=document.createElement("ul"),e.ul.style.display="none",e.li.appendChild(e.ul)),e.ul.appendChild(this.li));this.span.innerHTML=this._getInnerHtml();var m=[];m.push(h.node);f.isFolder&&m.push(h.folder);this.bExpanded&&m.push(h.expanded);!1!==this.hasChildren()&&m.push(h.hasChildren);f.isLazy&&null===this.childList&&m.push(h.lazy);p&&m.push(h.lastsib);this.bSelected&&m.push(h.selected);this.hasSubSel&&m.push(h.partsel);d.activeNode===this&&m.push(h.active);f.addClass&&m.push(f.addClass);
m.push(h.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(f.isLazy&&null===this.childList?"d":"")+(p?"l":""));m.push(h.combinedIconPrefix+(this.bExpanded?"e":"c")+(f.isFolder?"f":""));this.span.className=m.join(" ");this.li.className=p?h.lastsib:"";k&&g.onCreate&&g.onCreate.call(d,this,this.span);g.onRender&&g.onRender.call(d,this,this.span)}if((this.bExpanded||!0===b)&&this.childList){d=0;for(f=this.childList.length;d<f;d++)this.childList[d].render(!1,b);this._fixOrder()}this.ul&&(d="none"===this.ul.style.display,
f=!!this.bExpanded,a&&g.fx&&d===f?(e=g.fx.duration||200,c(this.ul).animate(g.fx,e)):this.ul.style.display=this.bExpanded||!e?"":"none")},getKeyPath:function(a){var c=[],b=this.tree.options.keyPathSeparator;this.visitParents(function(a){a.parent&&c.unshift(a.data.key)},!a);return b+c.join(b)},getParent:function(){return this.parent},getChildren:function(){return void 0===this.hasChildren()?void 0:this.childList},hasChildren:function(){return this.data.isLazy?null===this.childList||void 0===this.childList?
void 0:0===this.childList.length?!1:1===this.childList.length&&this.childList[0].isStatusNode()?void 0:!0:!!this.childList},isFirstSibling:function(){var a=this.parent;return!a||a.childList[0]===this},isLastSibling:function(){var a=this.parent;return!a||a.childList[a.childList.length-1]===this},isLoading:function(){return!!this._isLoading},getPrevSibling:function(){if(!this.parent)return null;for(var a=this.parent.childList,c=1,b=a.length;c<b;c++)if(a[c]===this)return a[c-1];return null},getNextSibling:function(){if(!this.parent)return null;
for(var a=this.parent.childList,c=0,b=a.length-1;c<b;c++)if(a[c]===this)return a[c+1];return null},isStatusNode:function(){return!0===this.data.isStatusNode},isChildOf:function(a){return this.parent&&this.parent===a},isDescendantOf:function(a){if(!a)return!1;for(var c=this.parent;c;){if(c===a)return!0;c=c.parent}return!1},countChildren:function(){var a=this.childList;if(!a)return 0;for(var c=a.length,b=0,d=c;b<d;b++)c+=a[b].countChildren();return c},sortChildren:function(a,c){var b=this.childList;
if(b){a=a||function(a,c){var b=a.data.title.toLowerCase(),q=c.data.title.toLowerCase();return b===q?0:b>q?1:-1};b.sort(a);if(c)for(var d=0,e=b.length;d<e;d++)b[d].childList&&b[d].sortChildren(a,"$norender$");"$norender$"!==c&&this.render()}},_setStatusNode:function(a){var c=this.childList?this.childList[0]:null;if(a)c?(a.isStatusNode=!0,a.key="_statusNode",c.data=a,c.render()):(a.isStatusNode=!0,a.key="_statusNode",this.addChild(a));else if(c&&c.isStatusNode()){try{this.ul&&(this.ul.removeChild(c.li),
c.li=null)}catch(b){}1===this.childList.length?this.childList=[]:this.childList.shift()}},setLazyNodeStatus:function(a,b){var d=b&&b.tooltip?b.tooltip:null,e=b&&b.info?" ("+b.info+")":"";switch(a){case DTNodeStatus_Ok:this._setStatusNode(null);c(this.span).removeClass(this.tree.options.classNames.nodeLoading);this._isLoading=!1;this.tree.options.autoFocus&&(this===this.tree.tnRoot&&this.childList&&0<this.childList.length?this.childList[0].focus():this.focus());break;case DTNodeStatus_Loading:this._isLoading=
!0;c(this.span).addClass(this.tree.options.classNames.nodeLoading);this.parent||this._setStatusNode({title:this.tree.options.strings.loading+e,tooltip:d,addClass:this.tree.options.classNames.nodeWait});break;case DTNodeStatus_Error:this._isLoading=!1;this._setStatusNode({title:this.tree.options.strings.loadError+e,tooltip:d,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+a+"'.";}},_parentList:function(a,c){for(var b=[],d=c?this:this.parent;d;)(a||d.parent)&&
b.unshift(d),d=d.parent;return b},getLevel:function(){for(var a=0,c=this.parent;c;)a++,c=c.parent;return a},_getTypeForOuterNodeEvent:function(a){var c=this.tree.options.classNames,b=a.target;if(0>b.className.indexOf(c.node))return null;var d=a.pageX-b.offsetLeft;a=a.pageY-b.offsetTop;for(var e=0,f=b.childNodes.length;e<f;e++){var g=b.childNodes[e],h=g.offsetLeft-b.offsetLeft,k=g.offsetTop-b.offsetTop,m=g.clientWidth,l=g.clientHeight;if(d>=h&&d<=h+m&&a>=k&&a<=k+l){if(g.className==c.title)return"title";
if(g.className==c.expander)return"expander";if(g.className==c.checkbox||g.className==c.radio)return"checkbox";if(g.className==c.nodeIcon)return"icon"}}return"prefix"},getEventTargetType:function(a){var c=a&&a.target?a.target.className:"",b=this.tree.options.classNames;return 0<=c.indexOf(b.title)?"title":0<=c.indexOf(b.expander)?"expander":0<=c.indexOf(b.checkbox)||0<=c.indexOf(b.radio)?"checkbox":0<=c.indexOf(b.nodeIcon)?"icon":0<=c.indexOf(b.empty)||0<=c.indexOf(b.vline)||0<=c.indexOf(b.connector)?
"prefix":0<=c.indexOf(b.node)?this._getTypeForOuterNodeEvent(a):null},isVisible:function(){for(var a=this._parentList(!0,!1),c=0,b=a.length;c<b;c++)if(!a[c].bExpanded)return!1;return!0},makeVisible:function(){for(var a=this._parentList(!0,!1),c=0,b=a.length;c<b;c++)a[c]._expand(!0)},focus:function(){this.makeVisible();try{c(this.span).find("\x3ea").focus()}catch(a){}},isFocused:function(){return this.tree.tnFocused===this},_activate:function(a,b){this.tree.logDebug("dtnode._activate(%o, fireEvents\x3d%o) - %o",
a,b,this);var d=this.tree.options;if(!this.data.isStatusNode)if(a){if(!b||!d.onQueryActivate||!1!==d.onQueryActivate.call(this.tree,a,this)){if(this.tree.activeNode){if(this.tree.activeNode===this)return;this.tree.activeNode.deactivate()}d.activeVisible&&this.makeVisible();this.tree.activeNode=this;d.persist&&c.cookie(d.cookieId+"-active",this.data.key,d.cookie);this.tree.persistence.activeKey=this.data.key;c(this.span).addClass(d.classNames.active);b&&d.onActivate&&d.onActivate.call(this.tree,this)}}else this.tree.activeNode!==
this||d.onQueryActivate&&!1===d.onQueryActivate.call(this.tree,!1,this)||(c(this.span).removeClass(d.classNames.active),d.persist&&c.cookie(d.cookieId+"-active","",d.cookie),this.tree.persistence.activeKey=null,this.tree.activeNode=null,b&&d.onDeactivate&&d.onDeactivate.call(this.tree,this))},activate:function(){this._activate(!0,!0)},activateSilently:function(){this._activate(!0,!1)},deactivate:function(){this._activate(!1,!0)},isActive:function(){return this.tree.activeNode===this},_userActivate:function(){var a=
!0,c=!1;if(this.data.isFolder)switch(this.tree.options.clickFolderMode){case 2:a=!1;c=!0;break;case 3:a=c=!0}null===this.parent&&(c=!1);c&&(this.toggleExpand(),this.focus());a&&this.activate()},_setSubSel:function(a){a?(this.hasSubSel=!0,c(this.span).addClass(this.tree.options.classNames.partsel)):(this.hasSubSel=!1,c(this.span).removeClass(this.tree.options.classNames.partsel))},_updatePartSelectionState:function(){var a;if(!this.hasChildren())return a=this.bSelected&&!this.data.unselectable&&!this.data.isStatusNode,
this._setSubSel(!1),a;var c,b=this.childList,d=!0,e=!0;a=0;for(c=b.length;a<c;a++){var f=b[a]._updatePartSelectionState();!1!==f&&(e=!1);!0!==f&&(d=!1)}a=d?!0:e?!1:void 0;this._setSubSel(void 0===a);this.bSelected=!0===a;return a},_fixSelectionState:function(){var a,c,b;if(this.bSelected)for(this.visit(function(a){a.parent._setSubSel(!0);a.data.unselectable||a._select(!0,!1,!1)}),a=this.parent;a;){a._setSubSel(!0);var d=!0;c=0;for(b=a.childList.length;c<b;c++){var e=a.childList[c];if(!e.bSelected&&
!e.data.isStatusNode&&!e.data.unselectable){d=!1;break}}d&&a._select(!0,!1,!1);a=a.parent}else for(this._setSubSel(!1),this.visit(function(a){a._setSubSel(!1);a._select(!1,!1,!1)}),a=this.parent;a;){a._select(!1,!1,!1);d=!1;c=0;for(b=a.childList.length;c<b;c++)if(a.childList[c].bSelected||a.childList[c].hasSubSel){d=!0;break}a._setSubSel(d);a=a.parent}},_select:function(a,b,d){var e=this.tree.options;this.data.isStatusNode||this.bSelected===a||b&&e.onQuerySelect&&!1===e.onQuerySelect.call(this.tree,
a,this)||(1==e.selectMode&&a&&this.tree.visit(function(a){if(a.bSelected)return a._select(!1,!1,!1),!1}),(this.bSelected=a)?(e.persist&&this.tree.persistence.addSelect(this.data.key),c(this.span).addClass(e.classNames.selected),d&&3===e.selectMode&&this._fixSelectionState(),b&&e.onSelect&&e.onSelect.call(this.tree,!0,this)):(e.persist&&this.tree.persistence.clearSelect(this.data.key),c(this.span).removeClass(e.classNames.selected),d&&3===e.selectMode&&this._fixSelectionState(),b&&e.onSelect&&e.onSelect.call(this.tree,
!1,this)))},select:function(a){return this.data.unselectable?this.bSelected:this._select(!1!==a,!0,!0)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},isLazy:function(){return!!this.data.isLazy},_loadContent:function(){try{var a=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this);this.setLazyNodeStatus(DTNodeStatus_Loading);!0===a.onLazyRead.call(this.tree,this)&&(this.setLazyNodeStatus(DTNodeStatus_Ok),this.tree.logDebug("_loadContent: succeeded - %o",
this))}catch(c){this.tree.logWarning("_loadContent: failed - %o",c),this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+c})}},_expand:function(a,c){if(this.bExpanded===a)this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",a,this);else{this.tree.logDebug("dtnode._expand(%o) - %o",a,this);var b=this.tree.options;if(!a&&this.getLevel()<b.minExpandLevel)this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",a,this);else if(!b.onQueryExpand||!1!==b.onQueryExpand.call(this.tree,a,this)){this.bExpanded=
a;b.persist&&(a?this.tree.persistence.addExpand(this.data.key):this.tree.persistence.clearExpand(this.data.key));this.render(!(this.data.isLazy&&null===this.childList)&&!this._isLoading&&!c);if(this.bExpanded&&this.parent&&b.autoCollapse)for(var d=this._parentList(!1,!0),e=0,f=d.length;e<f;e++)d[e].collapseSiblings();b.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()&&this.tree.activeNode.deactivate();a&&this.data.isLazy&&null===this.childList&&!this._isLoading?this._loadContent():
b.onExpand&&b.onExpand.call(this.tree,a,this)}}},isExpanded:function(){return this.bExpanded},expand:function(a){a=!1!==a;!this.childList&&!this.data.isLazy&&a||null===this.parent&&!a||this._expand(a)},scheduleAction:function(a,c){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.logDebug("clearTimeout(%o)",this.tree.timer));var b=this;switch(a){case "cancel":break;case "expand":this.tree.timer=setTimeout(function(){b.tree.logDebug("setTimeout: trigger expand");b.expand(!0)},c);break;case "activate":this.tree.timer=
setTimeout(function(){b.tree.logDebug("setTimeout: trigger activate");b.activate()},c);break;default:throw"Invalid mode "+a;}this.tree.logDebug("setTimeout(%s, %s): %s",a,c,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(null!==this.parent)for(var a=this.parent.childList,c=0,b=a.length;c<b;c++)a[c]!==this&&a[c].bExpanded&&a[c]._expand(!1)},_onClick:function(a){var c=this.getEventTargetType(a);if("expander"===c)this.toggleExpand(),this.focus();
else if("checkbox"===c)this.toggleSelect(),this.focus();else if(this._userActivate(),c=this.span.getElementsByTagName("a"),c[0])g.msie&&9>parseInt(g.version,10)||c[0].focus();else return!0;a.preventDefault()},_onDblClick:function(a){},_onKeydown:function(a){var c=!0,b;switch(a.which){case 107:case 187:this.bExpanded||this.toggleExpand();break;case 109:case 189:this.bExpanded&&this.toggleExpand();break;case 32:this._userActivate();break;case 8:this.parent&&this.parent.focus();break;case 37:this.bExpanded?
(this.toggleExpand(),this.focus()):this.parent&&this.parent.parent&&this.parent.focus();break;case 39:this.bExpanded||!this.childList&&!this.data.isLazy?this.childList&&this.childList[0].focus():(this.toggleExpand(),this.focus());break;case 38:for(b=this.getPrevSibling();b&&b.bExpanded&&b.childList;)b=b.childList[b.childList.length-1];!b&&this.parent&&this.parent.parent&&(b=this.parent);b&&b.focus();break;case 40:if(this.bExpanded&&this.childList)b=this.childList[0];else for(var d=this._parentList(!1,
!0),e=d.length-1;0<=e&&!(b=d[e].getNextSibling());e--);b&&b.focus();break;default:c=!1}c&&a.preventDefault()},_onKeypress:function(a){},_onFocus:function(a){var b=this.tree.options;if("blur"==a.type||"focusout"==a.type)b.onBlur&&b.onBlur.call(this.tree,this),this.tree.tnFocused&&c(this.tree.tnFocused.span).removeClass(b.classNames.focused),this.tree.tnFocused=null,b.persist&&c.cookie(b.cookieId+"-focus","",b.cookie);else if("focus"==a.type||"focusin"==a.type)this.tree.tnFocused&&this.tree.tnFocused!==
this&&(this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused),c(this.tree.tnFocused.span).removeClass(b.classNames.focused)),this.tree.tnFocused=this,b.onFocus&&b.onFocus.call(this.tree,this),c(this.tree.tnFocused.span).addClass(b.classNames.focused),b.persist&&c.cookie(b.cookieId+"-focus",this.data.key,b.cookie)},visit:function(a,c){var b=!0;if(!0===c&&(b=a(this),!1===b||"skip"===b))return b;if(this.childList)for(var d=0,e=this.childList.length;d<e&&(b=this.childList[d].visit(a,
!0),!1!==b);d++);return b},visitParents:function(a,c){if(c&&!1===a(this))return!1;for(var b=this.parent;b;){if(!1===a(b))return!1;b=b.parent}return!0},remove:function(){if(this===this.tree.root)throw"Cannot remove system root";return this.parent.removeChild(this)},removeChild:function(a){var c=this.childList;if(1===c.length){if(a!==c[0])throw"removeChild: invalid child";return this.removeChildren()}a===this.tree.activeNode&&a.deactivate();this.tree.options.persist&&(a.bSelected&&this.tree.persistence.clearSelect(a.data.key),
a.bExpanded&&this.tree.persistence.clearExpand(a.data.key));a.removeChildren(!0);this.ul&&a.li&&this.ul.removeChild(a.li);for(var b=0,d=c.length;b<d;b++)if(c[b]===a){this.childList.splice(b,1);break}},removeChildren:function(a,b){this.tree.logDebug("%s.removeChildren(%o)",this,a);var d=this.tree,e=this.childList;if(e){for(var f=0,g=e.length;f<g;f++){var h=e[f];h!==d.activeNode||b||h.deactivate();this.tree.options.persist&&!b&&(h.bSelected&&this.tree.persistence.clearSelect(h.data.key),h.bExpanded&&
this.tree.persistence.clearExpand(h.data.key));h.removeChildren(!0,b);this.ul&&h.li&&c("li",c(this.ul)).remove()}this.childList=null}a||(this._isLoading=!1,this.render())},setTitle:function(a){this.fromDict({title:a})},reload:function(a){throw"Use reloadChildren() instead";},reloadChildren:function(a){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.reloadChildren() requires lazy nodes.";if(a){var c=this,b="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+
this.data.key;this.tree.$tree.bind(b,function(d,e,f){c.tree.$tree.unbind(b);c.tree.logDebug("loaded %o, %o, %o",d,e,f);if(e!==c)throw"got invalid load event";a.call(c.tree,e,f)})}this.removeChildren();this._loadContent()},_loadKeyPath:function(a,c){var b=this.tree;b.logDebug("%s._loadKeyPath(%s)",this,a);if(""===a)throw"Key path must not be empty";var d=a.split(b.options.keyPathSeparator);if(""===d[0])throw"Key path must be relative (don't start with '/')";var e=d.shift();if(this.childList)for(var f=
0,g=this.childList.length;f<g;f++){var h=this.childList[f];if(h.data.key===e){if(0===d.length)c.call(b,h,"ok");else if(!h.data.isLazy||null!==h.childList&&void 0!==h.childList)c.call(b,h,"loaded"),h._loadKeyPath(d.join(b.options.keyPathSeparator),c);else{b.logDebug("%s._loadKeyPath(%s) -\x3e reloading %s...",this,a,h);var k=this;h.reloadChildren(function(e,f){f?(b.logDebug("%s._loadKeyPath(%s) -\x3e reloaded %s.",e,a,e),c.call(b,h,"loaded"),e._loadKeyPath(d.join(b.options.keyPathSeparator),c)):(b.logWarning("%s._loadKeyPath(%s) -\x3e reloadChildren() failed.",
k,a),c.call(b,h,"error"))})}return}}c.call(b,void 0,"notfound",e,0===d.length);b.logWarning("Node not found: "+e)},resetLazy:function(){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.resetLazy() requires lazy nodes.";this.expand(!1);this.removeChildren()},_addChildNode:function(a,b){var d=this.tree,e=d.options,f=d.persistence;a.parent=this;null===this.childList?this.childList=[]:b||0<this.childList.length&&c(this.childList[this.childList.length-1].span).removeClass(e.classNames.lastsib);
if(b){var g=c.inArray(b,this.childList);if(0>g)throw"\x3cbeforeNode\x3e must be a child of \x3cthis\x3e";this.childList.splice(g,0,a)}else this.childList.push(a);g=d.isInitializing();e.persist&&f.cookiesFound&&g?(f.activeKey===a.data.key&&(d.activeNode=a),f.focusedKey===a.data.key&&(d.focusNode=a),a.bExpanded=0<=c.inArray(a.data.key,f.expandedKeyList),a.bSelected=0<=c.inArray(a.data.key,f.selectedKeyList)):(a.data.activate&&(d.activeNode=a,e.persist&&(f.activeKey=a.data.key)),a.data.focus&&(d.focusNode=
a,e.persist&&(f.focusedKey=a.data.key)),a.bExpanded=!0===a.data.expand,a.bExpanded&&e.persist&&f.addExpand(a.data.key),a.bSelected=!0===a.data.select,a.bSelected&&e.persist&&f.addSelect(a.data.key));e.minExpandLevel>=a.getLevel()&&(this.bExpanded=!0);if(a.bSelected&&3==e.selectMode)for(e=this;e;)e.hasSubSel||e._setSubSel(!0),e=e.parent;d.bEnableUpdate&&this.render();return a},addChild:function(a,c){if("string"==typeof a)throw"Invalid data type for "+a;if(a&&0!==a.length){if(a instanceof f)return this._addChildNode(a,
c);a.length||(a=[a]);for(var b=this.tree.enableUpdate(!1),d=null,e=0,g=a.length;e<g;e++){var h=a[e],k=this._addChildNode(new f(this,this.tree,h),c);d||(d=k);h.children&&k.addChild(h.children,null)}this.tree.enableUpdate(b);return d}},append:function(a){this.tree.logWarning("node.append() is deprecated (use node.addChild() instead).");return this.addChild(a,null)},appendAjax:function(a){var b=this;this.removeChildren(!1,!0);this.setLazyNodeStatus(DTNodeStatus_Loading);if(a.debugLazyDelay){var d=a.debugLazyDelay;
a.debugLazyDelay=0;this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+d);setTimeout(function(){b.appendAjax(a)},d)}else{var e=a.success,f=a.error,g="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key,h=c.extend({},this.tree.options.ajaxDefaults,a,{success:function(a,d,f){f=b.tree.phase;var q=b.tree.options;b.tree.phase="init";q.postProcess?a=q.postProcess.call(this,a,this.dataType):a&&a.hasOwnProperty("d")&&(a="string"==typeof a.d?c.parseJSON(a.d):a.d);c.isArray(a)&&0===a.length||
b.addChild(a,null);b.tree.phase="postInit";e&&e.call(q,b,a,d);b.tree.logDebug("trigger "+g);b.tree.$tree.trigger(g,[b,!0]);b.tree.phase=f;b.setLazyNodeStatus(DTNodeStatus_Ok);c.isArray(a)&&0===a.length&&(b.childList=[],b.render())},error:function(a,c,d){b.tree.logWarning("appendAjax failed:",c,":\n",a,"\n",d);f&&f.call(h,b,a,c,d);b.tree.$tree.trigger(g,[b,!1]);b.setLazyNodeStatus(DTNodeStatus_Error,{info:c,tooltip:""+d})}});c.ajax(h)}},move:function(a,b){var d;if(this!==a){if(!this.parent)throw"Cannot move system root";
if(void 0===b||"over"==b)b="child";var e=this.parent,f="child"===b?a:a.parent;if(f.isDescendantOf(this))throw"Cannot move a node to it's own descendant";if(1==this.parent.childList.length)this.parent.childList=this.parent.data.isLazy?[]:null,this.parent.bExpanded=!1;else{d=c.inArray(this,this.parent.childList);if(0>d)throw"Internal error";this.parent.childList.splice(d,1)}this.parent.ul&&this.li&&this.parent.ul.removeChild(this.li);this.parent=f;if(f.hasChildren())switch(b){case "child":f.childList.push(this);
break;case "before":d=c.inArray(a,f.childList);if(0>d)throw"Internal error";f.childList.splice(d,0,this);break;case "after":d=c.inArray(a,f.childList);if(0>d)throw"Internal error";f.childList.splice(d+1,0,this);break;default:throw"Invalid mode "+b;}else f.childList=[this];f.ul||(f.ul=document.createElement("ul"),f.ul.style.display="none",f.li&&f.li.appendChild(f.ul));this.li&&f.ul.appendChild(this.li);if(this.tree!==a.tree)throw this.visit(function(c){c.tree=a.tree},null,!0),"Not yet implemented.";
e.isDescendantOf(f)||e.render();f.isDescendantOf(e)||f.render()}},lastentry:void 0};var h=d.create();h._getTreePersistData=function(a,c){var b=new h(a,c);b.read();return b.toDict()};getDynaTreePersistData=h._getTreePersistData;h.prototype={initialize:function(a,b){void 0===a&&(a=c.ui.dynatree.prototype.options.cookieId);b=c.extend({},c.ui.dynatree.prototype.options.cookie,b);this.cookieId=a;this.cookieOpts=b;this.cookiesFound=void 0;this.selectedKeyList=this.expandedKeyList=this.focusedKey=this.activeKey=
null},_log:function(a){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)},read:function(){this.cookiesFound=!1;var a=c.cookie(this.cookieId+"-active");this.activeKey=a||"";a&&(this.cookiesFound=!0);this.focusedKey=(a=c.cookie(this.cookieId+"-focus"))||"";a&&(this.cookiesFound=!0);this.expandedKeyList=(a=c.cookie(this.cookieId+"-expand"))?a.split(","):[];a&&(this.cookiesFound=!0);this.selectedKeyList=(a=c.cookie(this.cookieId+"-select"))?a.split(","):[];a&&(this.cookiesFound=
!0)},write:function(){c.cookie(this.cookieId+"-active",null===this.activeKey?"":this.activeKey,this.cookieOpts);c.cookie(this.cookieId+"-focus",null===this.focusedKey?"":this.focusedKey,this.cookieOpts);c.cookie(this.cookieId+"-expand",null===this.expandedKeyList?"":this.expandedKeyList.join(","),this.cookieOpts);c.cookie(this.cookieId+"-select",null===this.selectedKeyList?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(a){0>c.inArray(a,this.expandedKeyList)&&(this.expandedKeyList.push(a),
c.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},clearExpand:function(a){a=c.inArray(a,this.expandedKeyList);0<=a&&(this.expandedKeyList.splice(a,1),c.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},addSelect:function(a){0>c.inArray(a,this.selectedKeyList)&&(this.selectedKeyList.push(a),c.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},clearSelect:function(a){a=c.inArray(a,this.selectedKeyList);0<=
a&&(this.selectedKeyList.splice(a,1),c.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},isReloading:function(){return!0===this.cookiesFound},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:void 0};var l=d.create();l.version="@@Version";l.prototype={initialize:function(a){this.phase="init";this.$widget=a;this.options=a.options;
this.$tree=a.element;this.timer=null;this.divTree=this.$tree.get(0);b(this)},_load:function(a){var b=this.options,d=this;this.bEnableUpdate=!0;this._nodeCount=1;this.focusNode=this.activeNode=null;void 0!==b.rootVisible&&this.logWarning("Option 'rootVisible' is no longer supported.");1>b.minExpandLevel&&(this.logWarning("Option 'minExpandLevel' must be \x3e\x3d 1."),b.minExpandLevel=1);b.classNames!==c.ui.dynatree.prototype.options.classNames&&(b.classNames=c.extend({},c.ui.dynatree.prototype.options.classNames,
b.classNames));b.ajaxDefaults!==c.ui.dynatree.prototype.options.ajaxDefaults&&(b.ajaxDefaults=c.extend({},c.ui.dynatree.prototype.options.ajaxDefaults,b.ajaxDefaults));b.dnd!==c.ui.dynatree.prototype.options.dnd&&(b.dnd=c.extend({},c.ui.dynatree.prototype.options.dnd,b.dnd));b.imagePath||c("script").each(function(){if(0<=this.src.search(/.*dynatree[^\/]*\.js$/i))return 0<=this.src.indexOf("/")?b.imagePath=this.src.slice(0,this.src.lastIndexOf("/"))+"/skin/":b.imagePath="skin/",d.logDebug("Guessing imagePath from '%s': '%s'",
this.src,b.imagePath),!1});this.persistence=new h(b.cookieId,b.cookie);b.persist&&(c.cookie||_log("warn","Please include jquery.cookie.js to use persistence."),this.persistence.read());this.logDebug("DynaTree.persistence: %o",this.persistence.toDict());this.cache={tagEmpty:"\x3cspan class\x3d'"+b.classNames.empty+"'\x3e\x3c/span\x3e",tagVline:"\x3cspan class\x3d'"+b.classNames.vline+"'\x3e\x3c/span\x3e",tagExpander:"\x3cspan class\x3d'"+b.classNames.expander+"'\x3e\x3c/span\x3e",tagConnector:"\x3cspan class\x3d'"+
b.classNames.connector+"'\x3e\x3c/span\x3e",tagNodeIcon:"\x3cspan class\x3d'"+b.classNames.nodeIcon+"'\x3e\x3c/span\x3e",tagCheckbox:"\x3cspan class\x3d'"+b.classNames.checkbox+"'\x3e\x3c/span\x3e",lastentry:void 0};(b.children||b.initAjax&&b.initAjax.url||b.initId)&&c(this.divTree).empty();var e=this.$tree.find("\x3eul:first").hide();this.tnRoot=new f(null,this,{});this.tnRoot.bExpanded=!0;this.tnRoot.render();this.divTree.appendChild(this.tnRoot.ul);var g=this.tnRoot,k=b.persist&&this.persistence.isReloading(),
m=!1,l=this.enableUpdate(!1);this.logDebug("Dynatree._load(): read tree structure...");b.children?g.addChild(b.children):b.initAjax&&b.initAjax.url?(m=!0,g.data.isLazy=!0,this._reloadAjax(a)):b.initId?this._createFromTag(g,c("#"+b.initId)):(this._createFromTag(g,e),e.remove());this._checkConsistency();m||3!=b.selectMode||g._updatePartSelectionState();this.logDebug("Dynatree._load(): render nodes...");this.enableUpdate(l);this.logDebug("Dynatree._load(): bind events...");this.$widget.bind();this.logDebug("Dynatree._load(): postInit...");
this.phase="postInit";b.persist&&this.persistence.write();this.focusNode&&this.focusNode.isVisible()&&(this.logDebug("Focus on init: %o",this.focusNode),this.focusNode.focus());m||(b.onPostInit&&b.onPostInit.call(this,k,!1),a&&a.call(this,"ok"));this.phase="idle"},_reloadAjax:function(a){var b=this.options;if(!b.initAjax||!b.initAjax.url)throw"tree.reload() requires 'initAjax' mode.";var d=this.persistence,e=c.extend({},b.initAjax);e.addActiveKey&&(e.data.activeKey=d.activeKey);e.addFocusedKey&&(e.data.focusedKey=
d.focusedKey);e.addExpandedKeyList&&(e.data.expandedKeyList=d.expandedKeyList.join(","));e.addSelectedKeyList&&(e.data.selectedKeyList=d.selectedKeyList.join(","));e.success&&this.logWarning("initAjax: success callback is ignored; use onPostInit instead.");e.error&&this.logWarning("initAjax: error callback is ignored; use onPostInit instead.");var f=d.isReloading();e.success=function(c,d,e){3==b.selectMode&&c.tree.tnRoot._updatePartSelectionState();b.onPostInit&&b.onPostInit.call(c.tree,f,!1);a&&
a.call(c.tree,"ok")};e.error=function(c,d,e,g){b.onPostInit&&b.onPostInit.call(c.tree,f,!0,d,e,g);a&&a.call(c.tree,"error",d,e,g)};this.logDebug("Dynatree._init(): send Ajax request...");this.tnRoot.appendAjax(e)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(a){var c=this.tnRoot.toDict(!0);return a?c:c.children},serializeArray:function(a){a=this.getSelectedNodes(a);for(var c=this.$tree.attr("name")||this.$tree.attr("id"),b=[],d=0,e=a.length;d<e;d++)b.push({name:c,
value:a[d].data.key});return b},getPersistData:function(){return this.persistence.toDict()},logDebug:function(a){2<=this.options.debugLevel&&(Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments))},logInfo:function(a){1<=this.options.debugLevel&&(Array.prototype.unshift.apply(arguments,["info"]),_log.apply(this,arguments))},logWarning:function(a){Array.prototype.unshift.apply(arguments,["warn"]);_log.apply(this,arguments)},isInitializing:function(){return"init"==this.phase||
"postInit"==this.phase},isReloading:function(){return("init"==this.phase||"postInit"==this.phase)&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return"userEvent"==this.phase},redraw:function(){this.tnRoot.render(!1,!1)},renderInvisibleNodes:function(){this.tnRoot.render(!1,!0)},reload:function(a){this._load(a)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(a){var c=document.getElementById(this.options.idPrefix+
a);if(c)return c.dtnode?c.dtnode:null;var b=null;this.visit(function(c){if(c.data.key===a)return b=c,!1},!0);return b},getActiveNode:function(){return this.activeNode},reactivate:function(a){var c=this.activeNode;c&&(this.activeNode=null,c.activate(),a&&c.focus())},getSelectedNodes:function(a){var c=[];this.tnRoot.visit(function(b){if(b.bSelected&&(c.push(b),!0===a))return"skip"});return c},activateKey:function(a){a=null===a?null:this.getNodeByKey(a);if(!a)return this.activeNode&&this.activeNode.deactivate(),
this.activeNode=null;a.focus();a.activate();return a},loadKeyPath:function(a,c){var b=a.split(this.options.keyPathSeparator);""===b[0]&&b.shift();b[0]==this.tnRoot.data.key&&(this.logDebug("Removed leading root key."),b.shift());a=b.join(this.options.keyPathSeparator);return this.tnRoot._loadKeyPath(a,c)},selectKey:function(a,c){var b=this.getNodeByKey(a);if(!b)return null;b.select(c);return b},enableUpdate:function(a){if(this.bEnableUpdate==a)return a;(this.bEnableUpdate=a)&&this.redraw();return!a},
count:function(){return this.tnRoot.countChildren()},visit:function(a,c){return this.tnRoot.visit(a,c)},_createFromTag:function(a,b){var d=this;b.find("\x3eli").each(function(){var b=c(this),e=b.find("\x3espan:first"),f=b.find("\x3ea:first"),g=null,h=null,n;e.length?e=e.html():f.length?(e=f.html(),g=f.attr("href"),h=f.attr("target"),n=f.attr("title")):(e=b.html(),f=e.search(/<ul/i),e=0<=f?c.trim(e.substring(0,f)):c.trim(e));n={title:e,tooltip:n,isFolder:b.hasClass("folder"),isLazy:b.hasClass("lazy"),
expand:b.hasClass("expanded"),select:b.hasClass("selected"),activate:b.hasClass("active"),focus:b.hasClass("focused"),noLink:b.hasClass("noLink")};g&&(n.href=g,n.target=h);b.attr("title")&&(n.tooltip=b.attr("title"));b.attr("id")&&(n.key=""+b.attr("id"));if(b.attr("data")&&(g=c.trim(b.attr("data")))){"{"!=g.charAt(0)&&(g="{"+g+"}");try{c.extend(n,eval("("+g+")"))}catch(k){throw"Error parsing node data: "+k+"\ndata:\n'"+g+"'";}}g=a.addChild(n);b=b.find("\x3eul:first");b.length&&d._createFromTag(g,
b)})},_checkConsistency:function(){},_setDndStatus:function(a,b,d,f,g){a=a?c(a.span):null;b=c(b.span);var h;h=0;var k="center";this.$dndMarker||(this.$dndMarker=c("\x3cdiv id\x3d'dynatree-drop-marker'\x3e\x3c/div\x3e").hide().css({"z-index":1E3}).prependTo(c(this.divTree).parent()));if("after"===f||"before"===f||"over"===f){switch(f){case "before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over");this.$dndMarker.addClass("dynatree-drop-before");k="top";break;case "after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over");
this.$dndMarker.addClass("dynatree-drop-after");k="bottom";break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before"),this.$dndMarker.addClass("dynatree-drop-over"),b.addClass("dynatree-drop-target"),h=8}h=e?{my:"left"+(0===h?"":0<h?"+"+h:""+h)+" center",at:"left "+k,of:b}:{my:"left center",at:"left "+k,of:b,offset:""+h+" 0"};this.$dndMarker.show().position(h)}else b.removeClass("dynatree-drop-target"),this.$dndMarker.hide();"after"===f?b.addClass("dynatree-drop-after"):
b.removeClass("dynatree-drop-after");"before"===f?b.addClass("dynatree-drop-before"):b.removeClass("dynatree-drop-before");!0===g?(a&&a.addClass("dynatree-drop-accept"),b.addClass("dynatree-drop-accept"),d.addClass("dynatree-drop-accept")):(a&&a.removeClass("dynatree-drop-accept"),b.removeClass("dynatree-drop-accept"),d.removeClass("dynatree-drop-accept"));!1===g?(a&&a.addClass("dynatree-drop-reject"),b.addClass("dynatree-drop-reject"),d.addClass("dynatree-drop-reject")):(a&&a.removeClass("dynatree-drop-reject"),
b.removeClass("dynatree-drop-reject"),d.removeClass("dynatree-drop-reject"))},_onDragEvent:function(a,b,d,e,f,g){var h,k=this.options.dnd,m=null,l=c(b.span);switch(a){case "helper":f=c("\x3cdiv class\x3d'dynatree-drag-helper'\x3e\x3cspan class\x3d'dynatree-drag-helper-img' /\x3e\x3c/div\x3e").append(l.find(".dynatree-title").clone());c("ul.dynatree-container",b.tree.divTree).append(f);f.data("dtSourceNode",b);m=f;break;case "start":b.isStatusNode()?m=!1:k.onDragStart&&(m=k.onDragStart(b));!1===m?
(this.logDebug("tree.onDragStart() cancelled"),f.helper.trigger("mouseup"),f.helper.hide()):l.addClass("dynatree-drag-source");break;case "enter":m=(b=k.onDragEnter?k.onDragEnter(b,d,f,g):null)?c.isArray(b)?{over:0<=c.inArray("over",b),before:0<=c.inArray("before",b),after:0<=c.inArray("after",b)}:{over:!0===b||"over"===b,before:!0===b||"before"===b,after:!0===b||"after"===b}:!1;f.helper.data("enterResponse",m);break;case "over":h=f.helper.data("enterResponse");a=null;if(!1!==h)if("string"===typeof h)a=
h;else{var C=l.offset();e=e.pageY-C.top;l.width();l=e/l.height();h.after&&.75<l?a="after":!h.over&&h.after&&.5<l?a="after":h.before&&.25>=l?a="before":!h.over&&h.before&&.5>=l?a="before":h.over&&(a="over");k.preventVoidMoves&&(b===d?a=null:"before"===a&&d&&b===d.getNextSibling()?a=null:"after"===a&&d&&b===d.getPrevSibling()?a=null:"over"===a&&d&&d.parent===b&&d.isLastSibling()&&(a=null));f.helper.data("hitMode",a)}"over"===a&&k.autoExpandMS&&!1!==b.hasChildren()&&!b.bExpanded&&b.scheduleAction("expand",
k.autoExpandMS);a&&k.onDragOver&&(m=k.onDragOver(b,d,a,f,g),"over"===m||"before"===m||"after"===m)&&(a=m);this._setDndStatus(d,b,f.helper,a,!1!==m&&null!==a);break;case "drop":h=f.helper.hasClass("dynatree-drop-reject");if((a=f.helper.data("hitMode"))&&k.onDrop&&!h)k.onDrop(b,d,a,f,g);break;case "leave":b.scheduleAction("cancel");f.helper.data("enterResponse",null);f.helper.data("hitMode",null);this._setDndStatus(d,b,f.helper,"out",void 0);if(k.onDragLeave)k.onDragLeave(b,d,f,g);break;case "stop":l.removeClass("dynatree-drag-source");
if(k.onDragStop)k.onDragStop(b);break;default:throw"Unsupported drag event: "+a;}return m},cancelDrag:function(){var a=c.ui.ddmanager.current;a&&a.cancel()},lastentry:void 0};c.widget("ui.dynatree",{_init:function(){if(0>a(c.ui.version,"1.8"))return 0<=this.options.debugLevel&&_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher."),this._create();2<=this.options.debugLevel&&_log("debug","ui.dynatree._init() was called; no current default functionality.")},
_create:function(){1<=this.options.debugLevel&&logMsg("Dynatree._create(): version\x3d'%s', debugLevel\x3d%o.",c.ui.dynatree.version,this.options.debugLevel);this.options.event+=".dynatree";this.element.get(0);this.tree=new l(this);this.tree._load();this.tree.logDebug("Dynatree._init(): done.")},bind:function(){function a(b){b=c.event.fix(b||window.event);var d=c.ui.dynatree.getNode(b.target);return d?d._onFocus(b):!1}this.unbind();var b="click.dynatree dblclick.dynatree";this.options.keyboard&&(b+=
" keypress.dynatree keydown.dynatree");this.element.bind(b,function(a){var b=c.ui.dynatree.getNode(a.target);if(!b)return!0;var d=b.tree,e=d.options;d.logDebug("event(%s): dtnode: %s",a.type,b);var f=d.phase;d.phase="userEvent";try{switch(a.type){case "click":return e.onClick&&!1===e.onClick.call(d,b,a)?!1:b._onClick(a);case "dblclick":return e.onDblClick&&!1===e.onDblClick.call(d,b,a)?!1:b._onDblClick(a);case "keydown":return e.onKeydown&&!1===e.onKeydown.call(d,b,a)?!1:b._onKeydown(a);case "keypress":return e.onKeypress&&
!1===e.onKeypress.call(d,b,a)?!1:b._onKeypress(a)}}catch(g){d.logWarning("bind(%o): dtnode: %o, error: %o",a,b,g)}finally{d.phase=f}});b=this.tree.divTree;b.addEventListener?(b.addEventListener("focus",a,!0),b.addEventListener("blur",a,!0)):b.onfocusin=b.onfocusout=a},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind();c.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind();c.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},
getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:void 0});0>a(c.ui.version,"1.8")&&(c.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes");c.extend(c.ui.dynatree,{version:"DEVELOPMENT",buildType:"DEVELOP",_DynaTreeClass:l,_DynaTreeNodeClass:f,getNode:function(a){if(a instanceof f)return a;for(void 0!==a.selector&&(a=a[0]);a;){if(a.dtnode)return a.dtnode;
a=a.parentNode}return null},getPersistData:h._getTreePersistData});c.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:!0,keyboard:!0,persist:!1,autoCollapse:!1,clickFolderMode:3,activeVisible:!0,checkbox:!1,selectMode:2,fx:null,noLink:!1,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,
onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onCreate:null,onRender:null,postProcess:null,dnd:{onDragStart:null,onDragStop:null,revert:!1,autoExpandMS:1E3,preventVoidMoves:!0,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:!1,timeout:0,dataType:"json"},strings:{loading:"Loading\x26#8230;",loadError:"Load error!"},generateIds:!1,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",
node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",radio:"dynatree-radio",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",
active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:2,lastentry:void 0};0>a(c.ui.version,"1.8")&&(c.ui.dynatree.defaults=c.ui.dynatree.prototype.options);c.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:!1,isLazy:!1,tooltip:null,href:null,icon:null,addClass:null,noLink:!1,activate:!1,focus:!1,expand:!1,select:!1,hideCheckbox:!1,unselectable:!1,
children:null,lastentry:void 0};var k=!1,m=function(){k||(c.ui.plugin.add("draggable","connectToDynatree",{start:function(a,b){var d=c(this).data("ui-draggable")||c(this).data("draggable"),e=b.helper.data("dtSourceNode")||null;if(e)return d.offset.click.top=-2,d.offset.click.left=16,e.tree._onDragEvent("start",e,null,a,b,d)},drag:function(a,b){var d=c(this).data("ui-draggable")||c(this).data("draggable"),e=b.helper.data("dtSourceNode")||null,f=b.helper.data("dtTargetNode")||null,g=c.ui.dynatree.getNode(a.target);
a.target&&!g&&0<c(a.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length||(b.helper.data("dtTargetNode",g),f&&f!==g&&f.tree._onDragEvent("leave",f,e,a,b,d),g&&g.tree.options.dnd.onDrop&&(g===f?g.tree._onDragEvent("over",g,e,a,b,d):g.tree._onDragEvent("enter",g,e,a,b,d)))},stop:function(a,b){var d=c(this).data("ui-draggable")||c(this).data("draggable"),e=b.helper.data("dtSourceNode")||null,f=b.helper.data("dtTargetNode")||null,g="mouseup"==a.type&&1==a.which;logMsg("draggable-connectToDynatree.stop: targetNode(from event): %s, dtTargetNode: %s",
f,b.helper.data("dtTargetNode"));g||logMsg("Drag was cancelled");f&&(g&&f.tree._onDragEvent("drop",f,e,a,b,d),f.tree._onDragEvent("leave",f,e,a,b,d));e&&e.tree._onDragEvent("stop",e,null,a,b,d)}}),k=!0)}})(jQuery);$(function(){$("#side-menu").metisMenu()});
$(function(){$(window).bind("load resize",function(){topOffset=50;width=0<this.window.innerWidth?this.window.innerWidth:this.screen.width;768>width?($("div.navbar-collapse").addClass("collapse"),topOffset=100):$("div.navbar-collapse").removeClass("collapse");height=(0<this.window.innerHeight?this.window.innerHeight:this.screen.height)-1;height-=topOffset;1>height&&(height=1);height>topOffset&&$("#page-wrapper").css("min-height",height+"px")});var c=window.location,a=$("ul.nav a").filter(function(){return this.href==
c||0==c.href.indexOf(this.href)}).addClass("active").parent().parent().addClass("in").parent();a.is("li")&&a.addClass("active")});
$(function(){$("#side-menu").metisMenu();$(".more").click(ts.handleMoreClick);$(".hideMoreContainer").click(ts.handleHideClick);$("#allSelected").click(function(){$(".selectedId").prop("checked",this.checked)});$(".selectedId").change(function(){var c=$(".selectedId").filter(":checked").length==$(".selectedId").length;$("#allSelected").prop("checked",c)});$('[data-toggle\x3d"tooltip"]').tooltip();$(".secHide").click(ts.handleSecHideClick);$(".secShow").click(ts.handleSecShowClick);$(".rowsHide").click(ts.handleRowsHideClick);
$(".rowsShow").click(ts.handleRowsShowClick);$(window).height()+100<$(document).height()&&$("#top-link-block").removeClass("hidden").affix({offset:{top:100}});$(".tsHovPopper").popover({html:!0,trigger:"hover",content:function(){return $(this).next(".tsPContent").html()}});$(".tsHovPopperTop").popover({html:!0,trigger:"hover",placement:"auto top",content:function(){return $(this).next(".tsPContent").html()}})});
$(function(){$(window).bind("load resize",function(){topOffset=50;width=0<this.window.innerWidth?this.window.innerWidth:this.screen.width;768>width?($("div.navbar-collapse").addClass("collapse"),topOffset=100):$("div.navbar-collapse").removeClass("collapse");height=(0<this.window.innerHeight?this.window.innerHeight:this.screen.height)-1;height-=topOffset;1>height&&(height=1);height>topOffset&&$("#page-wrapper").css("min-height",height+"px")});var c=window.location,a=$("ul.nav a").filter(function(){return this.href==
c||0==c.href.indexOf(this.href)}).addClass("active").parent().parent().addClass("in").parent();a.is("li")&&a.addClass("active")});
$(window).bind("load resize",function(){topOffset=50;width=0<this.window.innerWidth?this.window.innerWidth:this.screen.width;768>width?($("div.navbar-collapse").addClass("collapse"),topOffset=100):$("div.navbar-collapse").removeClass("collapse");height=(0<this.window.innerHeight?this.window.innerHeight:this.screen.height)-1;height-=topOffset;1>height&&(height=1);height>topOffset&&$("#page-wrapper").css("min-height",height+"px")});
(function(){var c=window.ts={addScrollListeners:function(){"Chrome"==$.ua.browser.name&&($(".scrollSensitive").mouseover(function(){$.scrollLock(!0)}),$(".scrollSensitive").mouseleave(function(){$.scrollLock(!1)}),$(".scrollInsensitive").mouseleave(function(){$.scrollLock(!1)}))},clearForm:function(a){$(":input","#"+a).not(":button, :submit, :reset, :hidden, :radio").not("#pageSize").val("").removeAttr("checked").removeAttr("selected")},submitForm:function(a){$("#"+a).submit()},handleMoreClick:function(){$(this).hide();
$(this).siblings(".moreContainer").slideDown()},handleHideClick:function(){$(this).parent().siblings(".more").show();$(this).parent().slideUp()},handleSecHideClick:function(){$(this).hide();$(this).siblings(".showHide").show();$(this).siblings(".secBody").slideUp()},handleSecShowClick:function(){$(this).hide();$(this).siblings(".showHide").show();$(this).siblings(".secBody").slideDown()},handleRowsHideClick:function(){$(this).hide();$(".rowsShow",$(this).closest("div")).show();$("tr.secRow",$(this).closest("div")).slideUp()},
handleRowsShowClick:function(){$(this).hide();$(".rowsHide",$(this).closest("div")).show();$("tr.secRow",$(this).closest("div")).slideDown()},replacePathChars:function(a){return $(a).replace(/\\/g,"/").replace(/.*\//,"")},scrollTo:function(a){location.hash="#"+a},toggle:function(a){$("#"+a).toggle()},popup:function(a,b,c,g){b||(b="1002");c||(c="700");return window.open(a,g,"toolbar\x3dno, location\x3dno, directories\x3dno, status\x3dno, menubar\x3dno, scrollbars\x3dyes, resizable\x3dyes, copyhistory\x3dno, width\x3d"+
b+", height\x3d"+c+", top\x3d"+(screen.height/2-c/2)+", left\x3d"+(screen.width/2-b/2))},replaceLocation:function(a,b){if(b)window.location.replace(a);else return!1},setAccessContainerDisplay:function(a,b){var c=$(a).val().indexOf("@@!@"),c=$(a).val().substring(0,c).replace(/\s+/g,"");"false"==$("#ts"+c).children("span.accessTokenRequired").text()?($("#"+b).prop("required",!1),$("#"+b+"AtContainer").hide()):($("#"+b).prop("required",!0),$("#"+b).val($("#ts"+c).children("span.accessToken").text()),
$("#"+b+"AtContainer").show())},sortSelectList:function(a){a=$(a+" option");var b=a.map(function(a,b){return{t:$(b).text(),v:b.value}}).get();b.sort(function(a,b){return a.t>b.t?1:a.t<b.t?-1:0});a.each(function(a,c){c.value=b[a].v;$(c).text(b[a].t)})},correctTsDateFormatForMoment:function(a){return a.replace("dd","DD").replace("yyyy","YYYY").replace("a","A")},javaToMomentFormatMappings:{},getMomentDtFormat:function(a){return c.javaToMomentFormatMappings[a]},DEFAULT_DATE_TIME_FORMAT:"MM/DD/YYYY hh:mm:ssA",
DEFAULT_TIME_FORMAT:"hh:mm:ssA",DEFAULT_DATE_TIME_WITH_MILLIS_FORMAT:"MM/DD/YYYY hh:mm:ss.SSSA",DEFAULT_TIME_WITH_MILLIS_FORMAT:"hh:mm:ss.SSSA",setDtFormats:function(a,b,d,g,e,f){for(var h=0;h<a.length;h++)c.javaToMomentFormatMappings[a[h]]=c.correctTsDateFormatForMoment(a[h]);b?c.timeZone=b:(c.timeZone=moment.tz.guess(),a=$.cookie("tsTimeZone"),navigator.cookieEnabled&&a!=c.timeZone&&($.cookie("tsTimeZone",c.timeZone),window.location.reload()));c.dtFormat=d?c.getMomentDtFormat(d):c.DEFAULT_DATE_TIME_FORMAT;
c.timeFormat=g?c.getMomentDtFormat(g):c.DEFAULT_TIME_FORMAT;c.dtFormatWithMillis=e?c.getMomentDtFormat(e):c.DEFAULT_DATE_TIME_WITH_MILLIS_FORMAT;c.timeFormatWithMillis=f?c.getMomentDtFormat(f):c.DEFAULT_TIME_WITH_MILLIS_FORMAT},formatDateTimeString:function(a){var b=c.dtFormat?c.dtFormat:c.DEFAULT_DATE_TIME_FORMAT,d=c.timeZone?c.timeZone:moment.tz.guess();return a?moment(Number(a)).tz(d).format(b):""},addTzOffset:function(a){$("option[class\x3d'"+a+"'").text(function(){-1<moment.tz.names().indexOf($(this).text())&&
$(this).text($(this).text()+" (UTC"+moment().tz($(this).text()).format("Z")+")")})},createKeyValueArray:function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push({key:c,value:a[c]});return b},addWbrToCamelCase:function(a){var b="";if(a&&0<a.length)for(var c=0,g="";c<a.length;)g=a.charAt(c),b=isNaN(1*g)?0<c&&g==g.toUpperCase()?b+("\x3cwbr\x3e"+g+"\x3c/wbr\x3e"):b+g:b+g,c++;return b},formatNumber:function(a){var b=a;a&&(a=a.toString().split("."),a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),b=
a.join("."));return b},insertParam:function(a,b){a=encodeURI(a);b=encodeURI(b);for(var c=document.location.search.substr(1).split("\x26"),g=c.length,e;g--;)if(e=c[g].split("\x3d"),e[0]==a){e[1]=b;c[g]=e.join("\x3d");break}0>g&&(c[c.length]=[a,b].join("\x3d"));document.location.search=c.join("\x26")},scrollBarVisible:function(){if("number"===typeof window.innerWidth)return window.innerWidth>document.documentElement.clientWidth;var a=document.documentElement||document.body,b;"undefined"!==typeof a.currentStyle&&
(b=a.currentStyle.overflow);b=b||window.getComputedStyle(a,"").overflow;var c;"undefined"!==typeof a.currentStyle&&(c=a.currentStyle.overflowY);c=c||window.getComputedStyle(a,"").overflowY;var a=a.scrollHeight>a.clientHeight,g=/^(visible|auto)$/.test(b)||/^(visible|auto)$/.test(c);return a&&g||"scroll"===b||"scroll"===c},correctId:function(a){return a&&a.length&&0<a.length?a.replace(/([^A-Za-z0-9()[\]])/g,""):""},submitWithDisabledValidations:function(a,b){$("#"+b).attr("novalidate","");$("#"+a,$("#"+
b)).click()},handleAgreed:function(){$("#agreed").is(":checked")?$("#payPalForm").slideDown():$("#payPalForm").slideUp()},createTgTree:function(a,b,c,g,e){$("#testDefTree").dynatree({persist:!0,activeVisible:!0,autoCollapse:!0,children:e,onActivate:function(e){window.location.href=a+"/testdefinitions?selectedTestGrp\x3d"+e.data.key+"\x26activeOnly\x3d"+c+"\x26contentEntry\x3d"+b+g;return!1}})},veLinkMouseOver:function(){$(this).siblings("div.vErrors").show()},veLinkMouseOut:function(){$(this).siblings("div.vErrors").hide()},
veLinkClick:function(){$(this).off("mouseover");$(this).off("mouseout");var a=$(this).siblings("div.vErrors");a.find("button.veClose").show();a.draggable({handle:"div.tsFloaterHeader"})},veCloseClick:function(){var a=$(this).closest("div.vErrors"),b=a.siblings("span.veLink");b.mouseover(c.veLinkMouseOver);b.mouseout(c.veLinkMouseOut);$(this).hide();a.hide();document.getSelection().removeAllRanges()}}})();
$.scrollLock=function(){var c,a;function b(){var a=e.attr("style"),b=[],c={};a&&(b=a.split(/;\s/),$.each(b,function(a){a&&(a=a.split(/\s:\s/),2>a.length||(c[a[0]]=a[1]))}),$.extend(h,c))}function d(){l["overflow-y"]=ts.scrollBarVisible()?"scroll":"hidden";var d={};f||(c=$(window).scrollLeft(),a=$(window).scrollTop(),b(),$.extend(d,l,{left:-c+"px",top:-a+"px"}),e.css(d),$(window).scrollLeft(0).scrollTop(0),f=!0)}function g(){f&&(e.attr("style",$("\x3cx\x3e").css(h).attr("style")||""),$(window).scrollLeft(c).scrollTop(a),
f=!1)}var e=$("html"),f=!1;c=$(window).scrollLeft();a=$(window).scrollTop();var h={},l={"overflow-y":"scroll",position:"fixed",width:"100%"};b();return function(a){arguments.length?a?d():g():f?g():d()}}();
(function(){window.tsD3ts={createTimeSeriesChart:function(c){function a(a,b){for(var c=0,d,e=0;e<a.length;e++){var f=a[e],g=d3.mouse(b)[0],h=d3.mouse(b)[1],k=q(f,g),f=v(k.key),k=p(k.value),g=Math.abs(f-g)+Math.abs(k-h);if(0==c||g<c)c=g,d=e}return d}function b(a,b){(b.showPathEndValue||b.pathEndLabel)&&a.append("text").attr("transform","translate("+(n+3)+","+p(u[u.length-1].value)+")").attr("text-anchor","start").style("fill",b.pathColor).attr("class",b.legend&&b.legend.legendClass?b.legend.legendClass:
c.legendClass?c.legendClass:"chart-pathVal-bg").text(b.showPathEndValue?d3.format(",")(u[u.length-1].value):b.pathEndLabel)}function d(a,b){if(b.legend){var d,e,f;if(b.legend.xValue)d=v(G(b.legend.xValue)),f=q(u,d),e=p(f.value);else if(b.legend.yValue){d="highest"==b.legend.yValue?D[t]:u[u.length-1].value;e=p(d);a:{for(f=0;f<u.length;f++)if(u[f].value==d){f=u[f];break a}f=void 0}d=v(f.key)}A[t]=f;a.append("text").attr("transform","translate("+(d+(b.legend.marginLeft?b.legend.marginLeft:-4))+","+(e+
b.legend.marginTop)+")").attr("text-anchor",b.legend.position).style("fill",b.pathColor).attr("class",(b.legend.legendClass?b.legend.legendClass:c.legendClass?c.legendClass:"chart-legend-bg")+" "+("legend"+t)).text("yValue"==b.legend.text?D[t]:b.legend.text);"yValue"!=b.legend.text&&b.legend.appendYValue&&a.append("text").attr("transform","translate("+(d-4)+","+(e+b.legend.marginTop+12)+")").attr("text-anchor",b.legend.position).attr("class",(b.legend.legendClass?b.legend.legendClass:c.legendClass?
c.legendClass:"chart-legend-sm")+" "+("legend"+t)).style("fill","#868686").text(d3.format(",")(f.value))}}function g(a,b){a.select("circle.crcl"+b).style("display","none");a.select("text.ttVal"+b).style("display","none");a.select("text.ttKey"+b).style("display","none");a.select(".dottedVertical"+b).style("display","none");a.select(".dottedHorizontal"+b).style("display","none")}function e(a,b,c){a.select("circle.crcl"+c).style("display",null);a.select("circle.crcl"+c).attr("transform","translate("+
v(b.key)+","+p(b.value)+")")}function f(a,b,c){a.select("text.ttVal"+c).style("display",null);a.select("text.ttVal"+c).attr("transform","translate("+v(b.key)+","+p(b.value)+")").text(d3.format(",")(b.value))}function h(a,b,c){a.select("text.ttKey"+c).style("display",null);a.select("text.ttKey"+c).attr("transform","translate("+v(b.key)+","+p(b.value)+")").text(H(b.key))}function l(a,b,c){a.select(".dottedVertical"+c).style("display",null);a.select(".dottedVertical"+c).attr("transform","translate("+
v(b.key)+","+p(b.value)+")").attr("y2",z-p(b.value))}function k(a,b,c){a.select(".dottedHorizontal"+c).style("display",null);a.select(".dottedHorizontal"+c).attr("transform","translate("+-1*n+","+p(b.value)+")").attr("x2",n+n)}function m(a,b,c){return a?(a=d3.max(b,function(a){return a.value}),b=d3.max(b,function(a){return a.key}),c.key==b&&c.value==a):!1}function q(a,b){var c=v.invert(b),d=I(a,c,1),e=a[d-1];return(d=a[d])&&c-e.key>d.key-c?d:e}var n=c.chartWidth-60-80,z=c.chartHeight-25-30,G=d3.time.format(c.axisDateFormat).parse,
H=d3.time.format(c.tooltipDateFormat),I=d3.bisector(function(a){return a.key}).left;d3.bisector(function(a){return a.value});var v=d3.time.scale().range([0,n]),p=d3.scale.linear().range([z,0]),J=d3.svg.axis().scale(v).orient("bottom").ticks(c.xTicks),K=d3.svg.axis().scale(p).orient("left").ticks(c.yTicks),C=d3.svg.line().x(function(a){return v(a.key)}).y(function(a){return p(a.value)}),x=d3.select("#"+c.chartId).append("svg").attr("width",n+60+80).attr("height",z+25+30).append("g").attr("transform",
"translate(60,25)"),y=[],D=[],E=0,B=0,F;c.dataProps.forEach(function(a,b){F=ts.createKeyValueArray(a.dataJson);y.push(F);B=d3.max(F,function(a){return a.value});D.push(B);E<B&&(E=B)});(function(a,b){for(var c=0;c<a.dataProps.length;c++){var d=a.dataProps[c];if(a.showPathEndValue){d.showPathEndValue=!0;for(var e=b[c],f=e[e.length-1].value,g=0;g<b.length;g++){var h=b[g];if(g!=c&&Math.abs(h[e.length-1].value-f)<=a.minDiffShowEndValue){d.showPathEndValue=!1;break}}}else d.showPathEndValue=!1}})(c,y);
for(var r=x.append("g").style("display","none"),A=[],t=0;t<c.dataProps.length;t++){var w=c.dataProps[t],u=y[t];w.pathColor||(w.pathColor="#5B8AC1");u.forEach(function(a){a.key=G(a.key)});0==t&&(v.domain(d3.extent(u,function(a){return a.key})),p.domain([0,E]),x.append("g").attr("class","x axis "+(c.axisClass?c.axisClass:"")).attr("transform","translate(0,"+z+")").call(J),x.append("g").attr("class","y axis "+(c.axisClass?c.axisClass:"")).call(K));x.append("g").append("path").attr("class","line").style("stroke",
w.pathColor).attr("d",C(u));b(x,w);d(x,w);r.append("line").attr("class","dottedVertical"+t).style("stroke",w.pathColor).style("stroke-dasharray","3,3").style("opacity",.5).attr("y1",0).attr("y2",z);r.append("line").attr("class","dottedHorizontal"+t).style("stroke",w.pathColor).style("stroke-dasharray","3,3").style("opacity",.5).attr("x1",n).attr("x2",n);r.append("circle").attr("class","crcl"+t).style("fill","none").style("stroke",w.pathColor).attr("r",4);r.append("text").attr("class",(c.ttValClass?
c.ttValClass:"chart-ttVal")+" ttVal"+t).style("fill",w.pathColor).attr("dx",8).attr("dy","-.8em");r.append("text").attr("class",(c.ttKeyClass?c.ttKeyClass:"chart-ttKey")+" ttKey"+t).style("fill","#868686").attr("dx",8).attr("dy","1em")}x.append("rect").attr("width",n).attr("height",z).style("fill","none").style("pointer-events","all").on("mouseover",function(){r.style("display",null)}).on("mouseout",function(){r.style("display","none")}).on("mousemove",function(){var b=a(y,this),d=c.dataProps[b],
n=y[b],p=q(n,d3.mouse(this)[0]);y.forEach(function(a,c){c!=b&&g(r,c)});m(d.showPathEndValue,n,p)?(y.forEach(function(a,b){g(r,b)}),e(r,p,b)):(e(r,p,b),d.legend&&(d.legend.appendYValue||"yValue"==d.legend.text)&&A[b]&&A[b].key==p.key&&A[b].value==p.value?r.select("text.ttVal"+b).style("display","none"):f(r,p,b),h(r,p,b));l(r,p,b);k(r,p,b)})}}})();"use strict";
(function(){var c=window.tsD3st={defaultStrokeColor:"#fff",defaultStrokeWidth:1,defaultOpacity:.9,fadedOpacity:.3,hoverOpacity:1,highlightedBandStrokeColor:"#000",highlightedBandStrokeWidth:1,relatedBandStrokeColor:"#000",relatedBandStrokeWidth:.3,hoverBandStrokeColor:"#fff",hoverBandStrokeWidth:1,hoverRelatedBandStrokeColor:"#fff",hoverRelatedBandStrokeWidth:1,charts:{numberOfChildCharts:0,child:{}},hoverIntentSensitivity:6,hoverInterval:40,initChartsMap:function(a){c.charts.spec=a.spec;c.charts.profileActor=
a.profileActor;c.charts.specLabel=a.specLabel;c.charts.isFhir=-1<c.charts.spec.indexOf("FHIR")&&0>c.charts.spec.indexOf("CDS");c.charts.stmtLabel=a.stmtLabel;c.charts.published=a.published;a.bundle&&(c.bundle=a.bundle);c.charts.cb=a.cb;a.suppOnly&&(c.charts.suppOnly=a.suppOnly);a.isCurrMonth&&(c.charts.isCurrMonth=a.isCurrMonth);a.spec&&(c.charts.operDoc=JSON.parse(a.operDoc));c.contextPath=a.contextPath;a.spec=void 0;a.profileActor=void 0;a.specLabel=void 0;a.stmtLabel=void 0;a.operDoc=void 0;a.cb=
void 0;a.bundle=void 0;a.contextPath=void 0;a.suppOnly=void 0;a.isCurrMonth=void 0},initStMain:function(a){c.initChartsMap(a);c.charts.main=a;c.charts.numberOfChildCharts=a.children;c.charts.main.containerId="cont"+a.chartId},initStGroup:function(a){c.charts.child[a.chartId]=a;c.charts.child[a.chartId].containerId="cont"+a.chartId},createVisualizations:function(){c.createVisualization(c.charts.main,!0);for(var a=0;a<c.charts.numberOfChildCharts;a++)c.createVisualization(c.charts.child["st"+a],!1);
c.setSbConformant();c.setCbiTo(c.charts.cb,!0,!0)},createVisualization:function(a,b){var d=a.chartWidth-0-0,g=a.chartHeight-0-0,e=Math.min(d,g)/2,d=d3.select("#"+a.chartId).append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+a.chartWidth+" "+a.chartHeight).attr("preserveAspectRatio","xMinYMin meet").append("g").attr("id",a.containerId).attr("transform","translate("+d/2+","+g/2+")"),f=d3.scale.log(),h=d3.layout.partition().sort(null).value(function(a){return f(Math.max(a.size,
10))}),l=d3.scale.linear().range([0,2*Math.PI]),k=d3.scale.sqrt().range([0,e]),g=d3.svg.arc().startAngle(function(a){return Math.max(0,Math.min(2*Math.PI,l(a.x)))}).endAngle(function(a){return Math.max(0,Math.min(2*Math.PI,l(a.x+a.dx)))}).innerRadius(function(a){return Math.max(0,k(a.y))}).outerRadius(function(a){return Math.max(0,k(a.y+a.dy))});d.append("circle").attr("r",e).style("opacity",0);e=h.nodes(a.dataProps.dataJson);d.data([a.dataProps.dataJson]).selectAll("path").data(e).enter().append("path").attr("d",
g).attr("fill-rule","evenodd").attr("class",function(a){return a.leaf?"leaf":a.root?"root":""}).style("stroke",c.defaultStrokeColor).style("stroke-width",c.defaultStrokeWidth).style("fill",function(a){return c.getStatusBackground(a)}).style("opacity",c.defaultOpacity).style("cursor","pointer").on("click",c.mouseclick);d.selectAll("path").filter(function(d){d.contId=a.containerId;d.chId=a.chartId;d.isMain=b;d.isMain&&d.root&&(d.name=d.name.replace(c.charts.spec,c.charts.specLabel));c.setPercentsAndDefaults(d)})},
setPercentsAndDefaults:function(a){a||(a={});a.pass=a.pass?a.pass:0;a.fail=a.fail?a.fail:0;a.total=a.total?a.total:0;a.restN=a.total-a.pass-a.fail;a.passP=0<a.total?Math.floor(a.pass/a.total*100):0;a.failP=0<a.total?Math.floor(a.fail/a.total*100):0;a.restP=0<a.total?Math.floor(a.restN/a.total*100):0;return a},setSbConformant:function(){d3.select("#contstMain path.root").filter(function(a){var b=d3.select(".stMainSc");b.style("background",c.getStatusBackground(a));b.style("color",c.getStatusForeground(a))})},
setCbiTo:function(a,b,d){var g={currentBand:{},relatedBands:[],relatedCounts:{}},e=d3.selectAll("path");if(e&&e[0]&&0<e[0].length)for(var f=0;f<e[0].length;f++){var h=e[0][f];if(decodeURI(h.__data__.path)==decodeURI(a)){g.currentBand.selectedBand=h;g.currentBand.selectedD=h.__data__;g.currentBand.containerId=g.currentBand.selectedBand.parentNode.id;g.currentBand.isMain="contstMain"==g.currentBand.containerId;g.currentBand.descendantAndLeafInfo=c.collectDescendantAndLeafInfo(g.currentBand.selectedD);
break}}g.currentBand&&g.currentBand.selectedBand&&(c.collectRelatedBandInfoForCbi(g),c.displayCbiData(g,d),c.charts.cb=a);b?$("path").hoverIntent({over:c.mouseover,out:c.noOp,sensitivity:c.hoverIntentSensitivity,interval:c.hoverInterval}):($("path").unbind("mouseenter").unbind("mouseleave"),$("path").removeProp("hoverIntent_t"),$("path").removeProp("hoverIntent_s"))},collectRelatedBandInfoForCbi:function(a){if(a.currentBand.isMain)for(var b=0;b<c.charts.numberOfChildCharts;b++)c.collectRelatedBandInfoForCbiCharts("contst"+
b,a);else c.collectRelatedBandInfoForCbiCharts("contstMain",a)},collectRelatedBandInfoForCbiCharts:function(a,b){var c=b.currentBand.descendantAndLeafInfo.leafAcps,g={pass:0,fail:0,total:0},e=d3.selectAll("#"+a+" path.leaf");if(e&&e[0]&&0<e[0].length)for(var f=0;f<e[0].length;f++){var h=e[0][f];if(h.__data__.operations){for(var l=!1,k=0;k<c.length;k++){var m=h.__data__.operations[c[k]];m&&(l=!0,g.pass+=m.pass,g.fail+=m.fail,g.total+=m.total)}l&&(b.relatedBands.push({selectedBand:h,selectedD:h.__data__,
containerId:a,isMain:0>a.indexOf("Main")}),b.relatedCounts[a]=g)}}},collectDescendantAndLeafInfo:function(a,b){b||(b={selfAndDescendants:[],leafNodes:[],leafAcps:[]});b.selfAndDescendants.push(a);if(a.leaf){if(b.leafNodes.push(a),a.operations)for(var d in a.operations)0>b.leafAcps.indexOf(d)&&b.leafAcps.push(d)}else if(a.children&&0<a.children.length){d=0;for(var g=a.children.length;d<g;d++)c.collectDescendantAndLeafInfo(a.children[d],b)}return b},mouseover:function(){var a=this.__data__;if(void 0!=
a){c.hideAllUnderData();c.fadeAllBands();var b=c.collectDescendantAndLeafInfo(a);c.setBreadCrumb(a);c.highlightSelfAndDescendants(b.selfAndDescendants,a);if(a.isMain){c.updateStDetailedCountsTable("stMainDetailedCounts",a,!0,!0);for(var d=0;d<c.charts.numberOfChildCharts;d++){var g=c.findRelatedPathsAndAcpCounts("contst"+d,b.leafAcps);c.highlightPaths(g.relatedPaths);c.updateStSummCountsTable("st"+d+"SumCounts",a,c.setPercentsAndDefaults(g.relatedAcpCounts))}}else for(c.updateStDetailedCountsTable(a.chId+
"DetailedCounts",a,!0,!0),c.highlightPaths(c.findRelatedPaths("contstMain",b.leafAcps)),d=0;d<c.charts.numberOfChildCharts;d++)a.contId!="contst"+d&&c.highlightPaths(c.findRelatedPaths("contst"+d,b.leafAcps))}},mouseleave:function(a){c.setCbiTo(c.charts.cb,!0,!1);c.showTestScriptViewSelector()},mouseclick:function(a){$("path").unbind("mouseover");var b=encodeURIComponent(a.path);$("#cb").val(b);var d=new Date;d.setFullYear(d.getFullYear()+1);document.cookie="sccb\x3d"+b+"; expires\x3d"+d.toGMTString()+
";";window.history.pushState("Touchstone","Touchstone","/touchstone/analytics/"+(c.charts.published?"published":"conformance")+"?testSystem\x3d"+$("#testSystem").val()+"\x26supportedOnly\x3d"+(c.charts.suppOnly?!0:!1)+"\x26month\x3d"+$("#month").val()+"\x26spec\x3d"+encodeURIComponent($("#spec").val())+"\x26pa\x3d"+encodeURIComponent($("#pa").val())+"\x26cb\x3d"+b);c.setCbiTo(a.path,!1,!0);d3.event.stopPropagation()},highlightPaths:function(a){a.style("opacity",c.hoverOpacity);a.style("stroke",c.hoverRelatedBandStrokeColor);
a.style("stroke-width",c.hoverRelatedBandStrokeWidth)},findRelatedPathsAndAcpCounts:function(a,b){var c={relatedAcpCounts:{pass:0,fail:0,total:0}};c.relatedPaths=d3.selectAll("#"+a+" path.leaf").filter(function(a){for(var e=!1,f=0;f<b.length;f++)if(a.operations){var h=a.operations[b[f]];h&&(e=!0,c.relatedAcpCounts.pass+=h.pass,c.relatedAcpCounts.fail+=h.fail,c.relatedAcpCounts.total+=h.total)}return e});return c},findRelatedPaths:function(a,b){return d3.selectAll("#"+a+" path.leaf").filter(function(a){for(var c=
!1,e=0;e<b.length;e++)if(a.operations&&a.operations[b[e]]){c=!0;break}return c})},highlightSelfAndDescendants:function(a,b){d3.selectAll("#"+b.contId+" path").filter(function(b){return 0<=a.indexOf(b)}).style("opacity",c.hoverOpacity).style("stroke",c.hoverBandStrokeColor).style("stroke-width",c.hoverBandStrokeWidth)},displayCbiData:function(a,b){d3.selectAll("path").style("opacity",c.defaultOpacity).style("stroke",c.defaultStrokeColor).style("stroke-width",c.defaultStrokeWidth);c.hideAllUnderData();
if(a.currentBand&&a.currentBand&&a.currentBand.selectedBand){c.strokeBand(a.currentBand,c.highlightedBandStrokeColor,c.highlightedBandStrokeWidth,c.hoverOpacity);if(a.relatedBands&&0<a.relatedBands.length)for(var d=0;d<a.relatedBands.length;d++)c.strokeBand(a.relatedBands[d],c.relatedBandStrokeColor,c.relatedBandStrokeWidth,c.hoverOpacity);if(a.currentBand.isMain){if(c.setBreadCrumb(a.currentBand.selectedD),c.updateStDetailedCountsTable("stMainDetailedCounts",a.currentBand.selectedD,!0,!0),a.relatedCounts)for(d=
0;d<c.charts.numberOfChildCharts;d++)c.updateStSummCountsTable("st"+d+"SumCounts",a.currentBand.selectedD,c.setPercentsAndDefaults(a.relatedCounts["contst"+d]))}else c.setBreadCrumb(a.currentBand.selectedD),c.updateStDetailedCountsTable(a.currentBand.selectedD.chId+"DetailedCounts",a.currentBand.selectedD,!1,!1);b&&c.updateTestScriptDataForCbi(a)}},updateTestScriptDataForCbi:function(a){c.setTestScriptDataForCbi(a);c.buildTestscriptTablesForCbi(a);c.showTestscriptTablesForCbi(a)},setTestScriptDataForCbi:function(a){if(a&&
a.currentBand){var b=[];if(a.currentBand.isMain){if(a.relatedBands)for(var c=0;c<a.relatedBands.length;c++)a.relatedBands[c].selectedD&&b.push(a.relatedBands[c].selectedD)}else b=a.currentBand.descendantAndLeafInfo.leafNodes;c=[];if(b&&0<b.length)for(var g=0;g<b.length;g++){var e=b[g];c.push({unsupp:0<e.size&&e.size!=e.total,pass:e.pass,fail:e.fail,restN:e.restN,passP:e.passP,failP:e.failP,restP:e.restP,total:e.total,path:e.path,user:e.user,ufname:e.ufname,org:e.org,sst:e.sst,set:e.set,sstatus:e.sstatus,
sdesc:e.sdesc,eid:e.eid,ssc:e.ssc,ntests:e.ntests,variables:e.variables,setup:e.setup,estatus:e.estatus,tsv:e.tsv,bd:e.bd,vm:e.vm,bde:e.bde})}a.testScripts=c}},buildTestscriptTablesForCbi:function(a){var b=d3.select("#testScriptList");b.html("");var d=a&&a.currentBand&&a.testScripts?a.testScripts.length:0;if(0<d){var b=b.append("div").attr("class","table-responsive").append("table").attr("id","testScriptsTable").attr("class","table table-striped"),g=b.append("thead"),b=b.append("tbody"),g=g.append("tr");
c.charts.isCurrMonth&&!c.charts.published&&g.append("th").append("input").attr("id","allSelected").attr("name","allSelected").attr("type","checkbox");g.append("th").attr("class","text-nowrap").text("Test Script");c.charts.isCurrMonth&&!c.charts.published&&g.append("th").text("");g.append("th").attr("class","visible-lg ts-md").text("Status");g.append("th").attr("class","visible-lg ts-md text-nowrap").text("Start Time");g.append("th").attr("class","visible-lg ts-lg text-nowrap").text("End Time");g.append("th").text("Interactions");
g.append("th").attr("class","visible-lg ts-lg").text("By");g.append("th").attr("class","visible-lg ts-lg").text("Org");for(var e=0;e<a.testScripts.length;e++){var f=a.testScripts[e],g=b.append("tr").attr("class","tsListRow");c.charts.isCurrMonth&&!c.charts.published&&g.append("td").append("input").attr("type","checkbox").attr("class","selectedId").attr("name","selectedTestScripts").attr("value",f.path);var h=g.append("td").attr("class","vtop"),l=c.contextPath+"/testscript?id\x3d"+f.bd+"\x26name\x3d"+
f.path+"\x26version\x3d"+f.tsv+"\x26spec\x3d"+c.charts.spec;if(f.eid){var k=c.contextPath+"/scriptexecution?exec\x3d"+f.eid+"\x26qn\x3d"+f.path;f.vm?(h.append("a").attr("id",f.path).attr("href",l).text(f.path).attr("onclick","ts.popup('"+l+"');return false;"),l=h.append("a").attr("href",k),l.append("sup").attr("class","sbVmPopperExecuted").text("Last Execution"),l.attr("title","This is the version that was executed.")):h.append("a").attr("id",f.path).attr("class","sQname").attr("href",k).text(f.path)}else h.append("a").attr("id",
f.path).attr("href",l).text(f.path).attr("onclick","ts.popup('"+l+"');return false;");h.append("div").append("span").text(f.sdesc);if(f.variables&&f.variables.variableSetupMap){h=h.append("table");h.append("caption").attr("class","text-left bold tsSetupItemItems").text("Variable");var h=h.append("tbody"),m;for(m in f.variables.variableSetupMap){var q=h.append("tr");q.append("td").attr("class","text-right vmiddle tsSetupItemItems-cell-item").append("label").attr("class","control-label tsSetupItemItems tsSetupItemItemsVarLabel").text(m+
":");q=q.append("td").attr("class","vmiddle tsSetupItemItems-cell-item");l="";f.variables.vhMap&&(l=(l=f.variables.vhMap[m].hint)?l:"");k="";f.variables.variableSetupMap&&(k=(k=f.variables.variableSetupMap[m])?k:"");q.append("input").attr("name","testSetupScripts.list["+e+"].variableSetups.variableSetupMap["+m+"]").attr("placeholder",l).attr("class","form-control tsSetupItemItems inline-control input-xs").attr("required",!0).attr("type","text").attr("value",k)}q.append("input").attr("type","hidden").attr("name",
"testSetupScripts.list["+e+"].qualifiedName").attr("value",f.path)}if(c.charts.isCurrMonth&&!c.charts.published)if(f.setup)g.append("td").append("span").attr("class","btn btn-xs btn-primary createSetup").text("Setup").on("click",c.createSingleSetup);else g.append("td").append("span").attr("class","btn btn-xs btn-primary").text("Execute").on("click",c.executeSingleTestScript);g.append("td").attr("class","visible-lg ts-md").append("a").attr("href",c.contextPath+"/scriptexecution?exec\x3d"+f.eid+"\x26qn\x3d"+
f.path).append("span").attr("class","smallStatus status"+f.sstatus).text(c.bundle[f.sstatus]);g.append("td").attr("class","visible-lg ts-md").text(ts.formatDateTimeString(f.sst));g.append("td").attr("class","visible-lg ts-lg").text(ts.formatDateTimeString(f.set));h=g.append("td").append("div").attr("class","test-meter").style("width","60.95px");h.append("span").attr("class",0<f.pass?"test-pass":"test-pass-nb").style("width",f.passP+"%").text("").attr("title",f.pass+" of "+f.total+(f.unsupp?" supported":
"")+" interactions passed");h.append("span").attr("class",0<f.fail?"test-fail":"test-fail-nb").style("width",f.failP+"%").text("").attr("title",f.fail+" of "+f.total+(f.unsupp?" supported":"")+" interactions failed");h.append("span").attr("class","test-not-started").style("width",f.restlP+"%").text("");g.append("td").attr("class","visible-lg ts-lg").text(f.ufname);g.append("td").attr("class","visible-lg ts-lg").text(f.org)}$.fn.dataTable.isDataTable("#testScriptsTable")?$("#testScriptsTable").DataTable():
c.charts.isCurrMonth&&!c.charts.published?$("#testScriptsTable").DataTable({stateSave:!0,pageLength:5,lengthMenu:[5,25,100,300],order:[[1,"asc"]],columnDefs:[{targets:[0,2,6],orderable:!1}],dom:"\x3c'row'\x3c'col-sm-2 visible-lg ts-md'\x3c'tsButtonArea'\x3e\x3e\x3c'col-sm-2 input-xs'f\x3e\x3c'col-sm-1 visible-lg ts-md'\x3c'totalArea ts-lg'\x3e\x3e\x3c'col-sm-5'p\x3e\x3c'col-sm-2 visible-lg ts-lg'l\x3e\x3e\x3c'row'\x3c'col-sm-12't\x3e\x3e\x3c'row'\x3c'col-sm-2 visible-lg ts-md'\x3c'tsButtonArea'\x3e\x3e\x3c'col-sm-2 input-xs'f\x3e\x3c'col-sm-1 visible-lg ts-md'\x3c'totalArea'\x3e\x3e\x3c'col-sm-5'p\x3e\x3c'col-sm-2 visible-lg ts-lg'l\x3e\x3e"}):
$("#testScriptsTable").DataTable({stateSave:!0,pageLength:5,lengthMenu:[5,25,100,300],order:[[0,"asc"]],columnDefs:[{targets:[4],orderable:!1}],dom:"\x3c'row'\x3c'col-sm-2 input-xs'f\x3e\x3c'col-sm-1 visible-lg ts-md'\x3c'totalArea ts-lg'\x3e\x3e\x3c'col-sm-5'p\x3e\x3c'col-sm-2 visible-lg ts-lg'l\x3e\x3e\x3c'row'\x3c'col-sm-12't\x3e\x3e\x3c'row'\x3c'col-sm-2 input-xs'f\x3e\x3c'col-sm-1 visible-lg ts-md'\x3c'totalArea'\x3e\x3e\x3c'col-sm-5'p\x3e\x3c'col-sm-2 visible-lg ts-lg'l\x3e\x3e"});m=d3.selectAll("#testScriptList .tsButtonArea");
c.charts.isCurrMonth&&!c.charts.published&&(m.append("button").attr("class","executeSelected btn btn-xs btn-primary btn-margin").attr("name","executeSelected").attr("type","submit").text("Execute Selected"),m.append("button").attr("class","setupSelected btn btn-xs btn-primary btn-margin").attr("name","setupSelected").attr("type","submit").on("click",c.setupSelected).text("Setup Selected"),m.append("span").attr("class","btn btn-xs btn-success btn-margin ts-lg").style("margin-left","6px").text("Refresh").on("click",
function(){window.location.reload();return!1}));m=d3.selectAll("#testScriptList .totalArea");m.append("label").text("Total: ");m.append("span").text(a.testScripts.length);$("#allSelected").click(c.allCheckboxSelected);$("#testScriptsTable .selectedId").change(c.singleCheckboxSelected);c.resetPagingButton(d);c.resetSetupExecButton();8<a.testScripts.length?($("#top-link-block").removeClass("hidden").affix({offset:{top:100}}),$("#refreshButton").removeClass("hidden").affix({offset:{top:100}})):($("#top-link-block").addClass("hidden"),
$("#refreshButton").addClass("hidden"));$("#testScriptList").on("draw.dt",c.testScriptDtRedrawn)}},testScriptDtRedrawn:function(){$("#allSelected").click(function(){$("#testScriptsTable .selectedId").prop("checked",this.checked);c.resetSetupExecButton()});$("#testScriptsTable .selectedId").change(function(){var a=$("#testScriptsTable .selectedId").filter(":checked").length==$("#testScriptsTable .selectedId").length;$("#allSelected").prop("checked",a);c.resetSetupExecButton()});c.resetPagingButton();
c.resetSetupExecButton();$("#testScriptsTable a.sQname").blur()},resetSetupExecButton:function(){for(var a=$("input.selectedId").filter(":checked"),b=!1,c=0;c<a.length;c++){var g=$(".createSetup",$(a[c]).closest("tr"));if(g&&0<g.length){b=!0;break}}b?($("#testScriptList .setupSelected").show(),$("#testScriptList .executeSelected").hide()):($("#testScriptList .setupSelected").hide(),$("#testScriptList .executeSelected").show())},resetPagingButton:function(a){var b=$("#testScriptList select[name\x3dtestScriptsTable_length]").val();
$("#tetestScriptsTabler.tsListRow");a&&a<=b?$("#testScriptList .dataTables_paginate").hide():$("#testScriptList .dataTables_paginate").show()},allCheckboxSelected:function(){$("#testScriptsTable .selectedId").prop("checked",this.checked);c.resetRequiredAttr();c.resetSetupExecButton()},singleCheckboxSelected:function(){var a=$("#testScriptsTable .selectedId").filter(":checked").length==$("#testScriptsTable .selectedId").length;$("#allSelected").prop("checked",a);c.resetRequiredAttr();c.resetSetupExecButton()},
resetRequiredAttr:function(){for(var a=$("#testScriptsTable .selectedId"),b=0;b<a.length;b++)$(a[b]).prop("checked")?$("input.tsSetupItemItems",$(a[b]).closest("tr")).prop("required",!0):$("input.tsSetupItemItems",$(a[b]).closest("tr")).removeAttr("required")},executeSingleTestScript:function(){$("#allSelected").prop("checked",!1);$("#testScriptsTable .selectedId").prop("checked",!1);$("input.selectedId",$(this).closest("tr")).prop("checked",!0);$("#testScriptsTable input.tsSetupItemItems").removeAttr("required");
$("input.tsSetupItemItems",$(this).closest("tr")).prop("required",!0);$("#testScriptList .executeSelected:first").click();d3.event.stopPropagation()},createSingleSetup:function(){$("#testScriptsTable .selectedId").prop("checked",!1);$(".selectedId",$(this).closest("tr")).prop("checked",!0);$("#testScriptsTable input.tsSetupItemItems").removeAttr("required");$("#testScriptList .setupSelected:first").click();d3.event.stopPropagation()},setupSelected:function(){$("#testScriptsTable input.tsSetupItemItems").removeAttr("required")},
showTestscriptTablesForCbi:function(a){a&&a.currentBand&&a.testScripts?c.showTestScriptViewSelector():c.hideTestScriptViewSelector()},strokeBand:function(a,b,d,g){if(a.selectedBand){var e=a.selectedBand.attributes.d.nodeValue,f=d3.select("#"+a.containerId);d3.select(a.selectedBand).remove();b=f.append("path").attr("d",e).attr("fill-rule","evenodd").attr("class",a.selectedD.leaf?"leaf":a.selectedD.root?"root":"").style("fill",c.getStatusBackground(a.selectedD)).style("cursor","pointer").style("opacity",
g).style("stroke",b).style("stroke-width",d);b["0"]["0"].__data__=a.selectedD;b.on("click",c.mouseclick).on("mouseleave",c.mouseleaveBand)}},mouseleaveBand:function(a){$("path").hoverIntent({over:c.mouseover,out:c.noOp,sensitivity:c.hoverIntentSensitivity,interval:c.hoverInterval})},updateStSummCountsTable:function(a,b,d){var g=d3.select("#"+a+" table.sbCountsTable");g.html("");var e=g.append("tr");e.append("th").attr("class","text-right").attr("rowspan",2).html(ts.addWbrToCamelCase(b.name+" interactions"));
e.append("th").attr("class","visible-xs visible-lg ts-md").text(Math.floor(d.passP)+"% passed");e.append("th").attr("class","ts-lg").text("Pass");e.append("th").attr("class","ts-lg").text("Fail");e.append("th").attr("class","ts-lg").text("Other");e.append("th").text("Total");e=g.append("tr");b=e.append("td").attr("class","visible-xs visible-lg ts-md").append("div").attr("class","test-meter").style("width","60.95px");b.append("span").attr("class",0<d.pass?"test-pass":"test-pass-nb").style("width",
d.passP+"%").text("").attr("title",d.pass+" of "+d.total+" interactions passed");b.append("span").attr("class",0<d.fail?"test-fail":"test-fail-nb").style("width",d.failP+"%").attr("title",d.fail+" of "+d.total+" interactions failed");b.append("span").attr("class","test-not-started").style("width",d.restP+"%").attr("title",d.restN+" of "+d.total+" interactions not started");e.append("td").attr("class","text-right ts-lg").text(ts.formatNumber(d.pass)).attr("title",d.pass+" of "+d.total+" interactions passed");
e.append("td").attr("class","text-right ts-lg").text(ts.formatNumber(d.fail)).attr("title",d.fail+" of "+d.total+" interactions failed");e.append("td").attr("class","text-right ts-lg").text(ts.formatNumber(d.restN)).attr("title",d.restN+" of "+d.total+" interactions not started");e.append("td").attr("class","text-right").text(ts.formatNumber(d.total));c.showBlock(a)},updateStDetailedCountsTable:function(a,b,d,g){var e=d3.select("#"+a+" table.sbCountsTable");e.html("");if(b.leaf){if(b.operations){var f=
e.append("tr");(c.charts.suppOnly||b.leaf)&&f.append("th").attr("colspan","2").text("");f.append("th").text("");f.append("th").attr("class","visible-xs visible-lg ts-md").text(Math.floor(b.passP)+"% passed");f.append("th").attr("class","text-right ts-lg").text("Pass");f.append("th").attr("class","text-right ts-lg").text("Fail");f.append("th").attr("class","text-right ts-lg").text("Other");f.append("th").attr("class","text-right").text("Total");c.addSummaryTotals(e,b,!0);for(var h in b.operations)f=
b.operations[h],c.addStDetailedCountsTableRow(e.append("tr"),h,f.oper,f.resource?f.resource:void 0,c.setPercentsAndDefaults(f),!0,b)}}else for(f=e.append("tr"),f.append("th").text(""),(c.charts.suppOnly||b.leaf)&&f.append("th").text(""),f.append("th").attr("class","visible-xs visible-lg ts-md").text(Math.floor(b.passP)+"% passed"),f.append("th").attr("class","text-right ts-lg").text("Pass"),f.append("th").attr("class","text-right ts-lg").text("Fail"),f.append("th").attr("class","text-right ts-lg").text("Other"),
f.append("th").attr("class","text-right").text("Total"),c.addSummaryTotals(e,b,!1),h=0;h<b.children.length;h++)f=b.children[h],c.addStDetailedCountsTableRow(e.append("tr"),void 0,f.name,void 0,c.setPercentsAndDefaults(f),!1,b);d?($("#"+a+" span.rowsHide").show(),$("#"+a+" span.rowsShow").hide(),$("#"+a+" table.sbCountsTable tr.secRow").show()):($("#"+a+" span.rowsHide").hide(),$("#"+a+" span.rowsShow").show(),$("#"+a+" table.sbCountsTable tr.secRow").hide());g&&($("#"+a+" span.rowsHide").hide(),$("#"+
a+" span.rowsShow").hide());c.showBlock(a)},addSummaryTotals:function(a,b,d){a=a.append("tr").attr("class","statConfSummaryRow");a.append("th").attr("colspan",d?"2":"1").attr("class","text-right vtop").text("Summary");(c.charts.suppOnly||b.leaf)&&a.append("td").attr("class","vtop").text("");0<b.total?(d=a.append("td").attr("class","vtop visible-xs visible-lg ts-md").append("div").attr("class","test-meter").style("width","60.95px"),d.append("span").attr("class",(0<b.pass?"test-pass":"test-pass-nb")+
" vtop").style("width",b.passP+"%").text("").attr("title",b.pass+" of "+b.total+" interactions passed"),d.append("span").attr("class",(0<b.fail?"test-fail":"test-fail-nb")+" vtop").style("width",b.failP+"%").text("").attr("title",b.fail+" of "+b.total+" interactions failed"),d.append("span").attr("class","test-not-started vtop").style("width",b.restP+"%").attr("title",b.restN+" of "+b.total+" interactions not started"),a.append("td").attr("class","text-right vtop ts-lg").text(ts.formatNumber(b.pass)).attr("title",
b.pass+" of "+b.total+" interactions passed"),a.append("td").attr("class","text-right vtop ts-lg").text(ts.formatNumber(b.fail)).attr("title",b.fail+" of "+b.total+" interactions failed"),a.append("td").attr("class","text-right vtop ts-lg").text(ts.formatNumber(b.restN)).attr("title",b.restN+" of "+b.total+" interactions not started"),a.append("td").attr("class","text-right vtop").text(ts.formatNumber(b.total))):(a.append("td").attr("class","visible-xs visible-lg ts-md").text(""),a.append("td").attr("class",
"ts-lg").text(""),a.append("td").attr("class","ts-lg").text(""),a.append("td").attr("class","ts-lg").text(""),a.append("td").text(""))},addStDetailedCountsTableRow:function(a,b,d,g,e,f,h){a.attr("class","secRow");void 0!=b?a.append("td").attr("class","text-right vtop").style("width","100px").html("\x3ca target\x3d'_blank' href\x3d'"+c.getOperLink(d)+"'\x3e"+ts.addWbrToCamelCase(d)+"\x3c/a\x3e"):a.append("td").attr("class","text-right vtop").style("width","100px").html(ts.addWbrToCamelCase(d));if(f&&
(d=a.append("td").attr("class","vtop").style("width","100px"),g&&(d.append("div").html("\x3ca target\x3d'_blank' href\x3d'"+c.getResourceLink(g)+"'\x3e"+ts.addWbrToCamelCase(g)+"\x3c/a\x3e"),void 0!=b&&e.formats)))for(f=0;f<e.formats.length;f++)if(e.formats[f].racps)for(var l=0;l<e.formats[f].racps.length;l++)d.append("div").attr("class","m-l-6").attr("title",c.getRacpDesc(e.formats[f].racps[l].acp,e.formats[f].ct,e.formats[f].racps[l].unsupp,h)).html("\x3ca target\x3d'_blank' href\x3d'"+c.getRacpLink(g,
e.formats[f].racps[l])+"'\x3e"+e.formats[f].racps[l].name+"\x3c/a\x3e\x3ci class\x3d'm-l-3 fa fa-"+(e.formats[f].racps[l].unsupp?"times":"check")+" aria-hidden\x3d'true'\x3e\x3c/i\x3e");if(c.charts.suppOnly||h.leaf)b=c.getCrossAndTitle(b,e,h),a.append("td").attr("class","vtop text-center").attr("title",b.title).html('\x3ci class\x3d"fa fa-'+(b.cross?"times":"check")+'" aria-hidden\x3d"true"\x3e\x3c/i\x3e');0<e.total?(b=a.append("td").attr("class","vtop visible-xs visible-lg ts-md").append("div").attr("class",
"test-meter").style("width","60.95px"),b.append("span").attr("class",(0<e.pass?"test-pass":"test-pass-nb")+" vtop").style("width",e.passP+"%").text("").attr("title",e.pass+" of "+e.total+" interactions passed"),b.append("span").attr("class",(0<e.fail?"test-fail":"test-fail-nb")+" vtop").style("width",e.failP+"%").text("").attr("title",e.fail+" of "+e.total+" interactions failed"),b.append("span").attr("class","test-not-started vtop").style("width",e.restP+"%").attr("title",e.restN+" of "+e.total+
" interactions not started"),a.append("td").attr("class","text-right vtop ts-lg").text(ts.formatNumber(e.pass)).attr("title",e.pass+" of "+e.total+" interactions passed"),a.append("td").attr("class","text-right vtop ts-lg").text(ts.formatNumber(e.fail)).attr("title",e.fail+" of "+e.total+" interactions failed"),a.append("td").attr("class","text-right vtop ts-lg").text(ts.formatNumber(e.restN)).attr("title",e.restN+" of "+e.total+" interactions not started"),a.append("td").attr("class","text-right vtop").text(ts.formatNumber(e.total))):
(a.append("td").attr("class","visible-xs visible-lg ts-md").text(""),a.append("td").attr("class","ts-lg").text(""),a.append("td").attr("class","ts-lg").text(""),a.append("td").attr("class","ts-lg").text(""),a.append("td").text(""));return a},getCrossAndTitle:function(a,b,d){var g={cross:!1,title:""},e=" by the "+c.charts.stmtLabel+".";g.cross=!1;if(d.leaf){d=[];var f=[];if(b.formats&&0<b.formats.length)for(var h=0;h<b.formats.length;h++){var l=c.getCt(b.formats[h].ct);b.formats[h].unsupp?f.push(l):
d.push(l)}0<d.length?(g.title="The interaction '"+c.expandAcp(a)+"' is supported in the format"+c.getsIfMultiple(d)+" ["+d.join(", ")+"]",0<f.length?(g.cross=!0,g.title=g.title+" but not in the format"+c.getsIfMultiple(f)+" ["+f.join(", ")+"]"+e):g.title+=e):0<f.length?(g.cross=!0,g.title="The interaction '"+c.expandAcp(a)+"' is not supported in the format"+c.getsIfMultiple(f)+" ["+f.join(", ")+"]"+e):g.title="The interaction '"+c.expandAcp(a)+"' is not supported in any format"+e}else 0==b.total?
(g.title=!d.isMain&&b.leaf?"The testscript does not contribute towards totals because it contains one or more interactions that are unsupported"+e:"No interaction contribute towards totals because all test scripts in this area contain one or more interactions that are unsupported"+e,g.cross=!0):b.total<b.size?(g.title="One or more interactions in this "+(b.children&&0<b.children.length||d.isMain?"area":"test script")+" are unsupported"+e,g.cross=!0):g.title="All interactions in this "+(b.children&&
0<b.children.length||d.isMain?"area":"test script")+" are supported"+e;return g},getRacpDesc:function(a,b,d,g){return void 0!=a?"The interaction '"+c.expandAcp(a)+"' is "+(d?"not ":"")+"supported in the format ["+c.getCt(b)+"] by the "+c.charts.stmtLabel:d?g.isMain?"No interactions in this area is supported by the "+c.charts.stmtLabel:"Not all interactions in this "+(g.children&&0<g.children.length&&g.children[0].leaf?"test script":"area")+" is supported by the "+c.charts.stmtLabel:"One or more interactions in this area is supported by the "+
c.charts.stmtLabel},setBreadCrumb:function(a){c.hideAllBreadCrumbs();if(a.path&&0<a.path.length){var b=a.path;a.isMain&&(b=a.path.substring(1),b=b.replace(c.charts.spec,c.charts.specLabel));var d=b.lastIndexOf("/"),g="";0<d&&!a.root&&(g=b.substring(0,d));a.root?(d3.select("#"+a.chId+"Path .stPathCurrent").html(ts.addWbrToCamelCase(a.name)).style("margin-left",0),d3.select("#"+a.chId+"Path .sbParentPath").style("display","none"),d3.select("#"+a.chId+"Path .stPathSep").style("display",a.isMain?"none":
"inline")):(d3.select("#"+a.chId+"Path .sbParentPath").html(g),d3.select("#"+a.chId+"Path .stPathCurrent").html(ts.addWbrToCamelCase(a.name)).style("margin-left","5px"),d3.select("#"+a.chId+"Path .sbParentPath").style("display","inline"),d3.select("#"+a.chId+"Path .stPathSep").style("display","inline"));c.showBlock(a.chId+"Path")}},getSelfAndDescendants:function(a,b){b||(b=[]);b.push(a);if(a.children&&0<a.children.length)for(var d=0,g=a.children.length;d<g;d++)b.push(c.getSelfAndDescendants(a.children[d],
b));return b},getAncestors:function(a){for(var b=[];a.parent;)b.unshift(a),a=a.parent;b.unshift(a);return b},getStatusForeground:function(a){return 0==a.pass&&0==a.fail?"#000":0==a.fail?(a=a.pass/a.total,1==a?"#e8e8e8":.4<=a?"#323232":"#315904"):0<a.fail?.75<=a.fail/a.total?"#fff":"#407406":"#000"},getStatusBackground:function(a){return 0==a.total?"#f4f4f4":0==a.pass&&0==a.fail?"#dadada":0==a.fail?(a=a.pass/a.total,1==a?"#547452":.95<=a?"#698366":.9<=a?"#728C70":.8<=a?"#829980":.75<=a?"#92A690":.7<=
a?"#A1B29F":.6<=a?"#B1BFAF":"#C0CBBE"):0<a.fail?(a=a.fail/a.total,1==a?"#9D4752":.95<=a?"#A45660":.9<=a?"#AC636D":.8<=a?"#B3717A":.75<=a?"#BB8087":.7<=a?"#C28E95":.6<=a?"#C99BA2":.55<=a?"#D1AAAF":.5<=a?"#D8B9BD":"#E0C6CA"):"#FFFF00"},fadeAllBands:function(a){d3.selectAll("path").style("opacity",c.fadedOpacity).style("stroke",c.defaultStrokeColor).style("stroke-width",c.defaultStrokeWidth)},hideAllUnderData:function(){c.hideAllBreadCrumbs();c.hideStatDetailedCounts();c.hideMainSummCounts();c.hideAllSumCounts();
c.hideTestScriptViewSelector()},hideAllSumCounts:function(){c.hideElement("stMainSumCounts");for(var a=0;a<c.charts.numberOfChildCharts;a++)c.hideElement("st"+a+"SumCounts")},hideAllBreadCrumbs:function(){c.hideElement("stMainPath");for(var a=0;a<c.charts.numberOfChildCharts;a++)c.hideElement("st"+a+"Path")},hideStatDetailedCounts:function(){c.hideElement("stMainDetailedCounts");for(var a=0;a<c.charts.numberOfChildCharts;a++)c.hideElement("st"+a+"DetailedCounts")},hideMainSummCounts:function(){c.hideElement("stMainSumCounts")},
hideTestScriptViewSelector:function(){c.hideElement("testScriptArea");$("#refreshButton").hide();$("#colorCodingArea").hide()},hideElement:function(a){$("#"+a).css("display","none")},showTestScriptViewSelector:function(){c.showBlock("testScriptArea");$("#refreshButton").show();$("#colorCodingArea").show()},showBlock:function(a){$("#"+a).css("display","block")},showTable:function(a){$("#"+a).css("display","table")},noOp:function(){},getsIfMultiple:function(a){return a&&1<a.length?"s":""},getCt:function(a){a=
void 0!=a?a.toUpperCase():"";return-1<a.indexOf("PATCH")?a:c.charts.isFhir&&"NONE"!=a?"FHIR-"+a:a},expandAcp:function(a){a=void 0!=a?a:"";c.charts.isFhir&&(a=a.replace("s/r","rest/server/resource"),a=a.replace("c/r","rest/client/resource"),a=a.replace("s/op/","rest/server/operation/definition/reference/"),a=a.replace("c/op/","rest/client/operation/definition/reference/"),a=a.replace("s/sp","rest/server/searchParam"),a=a.replace("c/sp","rest/client/searchParam"),a=a.replace("s/i","rest/server/interaction"),
a=a.replace("c/i","rest/client/interaction"),a=a.replace("[","").replace("]","").toLowerCase());return a},getResourceLink:function(a){return a&&c.charts.isFhir?c.charts.operDoc.baseDocUrl+a.toLowerCase()+".html":""},getOperLink:function(a){if(a&&c.charts.isFhir){if(a.startsWith("$"))return c.charts.operDoc.customLinks[a]?c.charts.operDoc.customLinks[a]:c.charts.operDoc.baseDocUrl+c.charts.operDoc.extendedOperLink;a=a.replace("-type","").replace("-instance","").replace("batch","transaction").replace("-system",
"").replace("conditional","").replace("updateCreate","update").toLowerCase();var b=a.indexOf("/");0<b&&(a=a.substring(0,b));return c.charts.operDoc.baseDocUrl+c.charts.operDoc.operLinkBase+a}return c.charts.operDoc.customLinks[a]?c.charts.operDoc.customLinks[a]:c.charts.operDoc.operLinkBase?c.charts.operDoc.mainDocUrl+c.charts.operDoc.operLinkBase:c.charts.operDoc.mainDocUrl},getRacpLink:function(a,b){if(b.fs)return c.getResourceLink(a)+"#search";if(b.fsp)return c.charts.operDoc.baseDocUrl+c.charts.operDoc.searchParamPath}}})();
"use strict";
(function(){var c=window.litD3st={defaultStrokeColor:"#fff",defaultStrokeWidth:1,defaultOpacity:.9,fadedOpacity:.3,hoverOpacity:1,highlightedBandStrokeColor:"#000",highlightedBandStrokeWidth:1,relatedBandStrokeColor:"#000",relatedBandStrokeWidth:.3,hoverBandStrokeColor:"#fff",hoverBandStrokeWidth:1,hoverRelatedBandStrokeColor:"#fff",hoverRelatedBandStrokeWidth:1,numberOfCharts:0,charts:{},hoverIntentSensitivity:6,hoverInterval:40,initSt:function(a){c.numberOfCharts=a.numberOfCharts;c.specLabel=a.specLabel;
c.profileActor=a.profileActor;c.isFhir=-1<a.spec.indexOf("FHIR");c.stmtLabel=a.stmtLabel;a.bundle&&(c.bundle=a.bundle);c.suppOnly=!0;c.charts[a.chartId]={};c.charts[a.chartId].chartProps=a;c.charts[a.chartId].chartProps.containerId="cont"+a.chartId;a.spec=void 0;a.profileActor=void 0;a.specLabel=void 0;a.bundle=void 0;a.suppOnly=void 0},createVisualizations:function(){for(var a=0;a<c.numberOfCharts;a++)c.createVisualization(c.charts["st"+a].chartProps)},createVisualization:function(a){var b=a.chartWidth-
0-0,d=a.chartHeight-0-0,g=Math.min(b,d)/2,b=d3.select("#"+a.chartId).append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+a.chartWidth+" "+a.chartHeight).attr("preserveAspectRatio","xMinYMin meet").append("g").attr("id",a.containerId).attr("transform","translate("+b/2+","+d/2+")"),e=d3.scale.log(),f=d3.layout.partition().sort(null).value(function(a){return e(Math.max(a.size,10))}),h=d3.scale.linear().range([0,2*Math.PI]),l=d3.scale.sqrt().range([0,g]),d=d3.svg.arc().startAngle(function(a){return Math.max(0,
Math.min(2*Math.PI,h(a.x)))}).endAngle(function(a){return Math.max(0,Math.min(2*Math.PI,h(a.x+a.dx)))}).innerRadius(function(a){return Math.max(0,l(a.y))}).outerRadius(function(a){return Math.max(0,l(a.y+a.dy))});b.append("circle").attr("r",g).style("opacity",0);g=f.nodes(a.dataProps.dataJson);b.data([a.dataProps.dataJson]).selectAll("path").data(g).enter().append("path").attr("d",d).attr("fill-rule","evenodd").attr("class",function(a){return a.leaf?"leaf":a.root?"root":""}).style("stroke",c.defaultStrokeColor).style("stroke-width",
c.defaultStrokeWidth).style("fill",function(a){return c.getStatusBackground(a)}).style("opacity",c.defaultOpacity).style("cursor","pointer");b.selectAll("path").filter(function(b){b.contId=a.containerId;b.chId=a.chartId;c.setPercentsAndDefaults(b)});b.append("text").attr("dx",1).attr("dy",15).attr("font-size","40px").attr("text-anchor","middle").style("fill",c.getStatusForeground(a.dataProps.dataJson)).text(Math.floor(a.dataProps.dataJson.pass/a.dataProps.dataJson.total*100)+"%");$("path").hoverIntent({over:c.mouseover,
out:c.noOp,sensitivity:c.hoverIntentSensitivity,interval:c.hoverInterval})},mouseover:function(a){$.scrollLock(!0);var b=this.__data__;if(void 0!=b){var d=c.collectDescendantAndLeafInfo(b);c.setBreadCrumb(b);c.highlightSelfAndDescendants(d.selfAndDescendants,b);c.updateStDetailedCountsTable("litSbDetailedCounts",b,!0,!0);$("#lit-sb-Tbl").css({position:"absolute",left:a.pageX+20,top:a.pageY-15}).show()}},mouseleaveBand:function(a){},mouseleave:function(a){$("#lit-sb-Tbl").hide().delay(1E3);d3.selectAll("path").style("opacity",
c.defaultOpacity).style("stroke",c.defaultStrokeColor).style("stroke-width",c.defaultStrokeWidth);$.scrollLock(!1)},setBreadCrumb:function(a){if(a.path&&0<a.path.length){var b=a.path,b=a.path.substring(1),d=b.lastIndexOf("/"),g="";0<d&&!a.root&&(g=b.substring(0,d));a.root?(d3.select("#litSbBreadPath .stPathCurrent").html(ts.addWbrToCamelCase(a.name)).style("margin-left",0),d3.select("#litSbBreadPath .sbParentPath").style("display","none")):(d3.select("#litSbBreadPath .sbParentPath").html(g),d3.select("#litSbBreadPath .stPathCurrent").html(ts.addWbrToCamelCase(a.name)).style("margin-left",
"5px"),d3.select("#litSbBreadPath .sbParentPath").style("display","inline"));d3.select("#litSbBreadPath .stPathSep").style("display","inline");0<a.total?d3.select("#lit-sb-inter-text").html("\x3cstrong\x3e"+Math.floor(a.pass/a.total*100)+"%\x3c/strong\x3e ("+ts.formatNumber(a.pass)+" / "+ts.formatNumber(a.total)+") of \x3cstrong\x3e"+a.name+"\x3c/strong\x3e supported interactions passed"):d3.select("#lit-sb-inter-text").html("No interactions are supported by the capability statement in \x3cstrong\x3e"+
a.name+"\x3c/strong\x3e");c.showBlock(a.chId+"Path")}},updateStDetailedCountsTable:function(a,b,d,g){var e=d3.select("#"+a+" table.sbCountsTable");e.html("");if(b.leaf){if(b.operations){var f=e.append("tr");b.leaf&&f.append("th").attr("colspan","2").text("");f.append("th").text("");f.append("th").attr("class","visible-xs visible-lg ts-md").text(Math.floor(b.passP)+"% passed");f.append("th").attr("class","text-right ts-lg").text("Pass");f.append("th").attr("class","text-right ts-lg").text("Fail");
f.append("th").attr("class","text-right ts-lg").text("Other");f.append("th").attr("class","text-right").text("Total");c.addSummaryTotals(e,b,!0);for(var h in b.operations)f=b.operations[h],c.addStDetailedCountsTableRow(e.append("tr"),h,f.oper,f.resource?f.resource:void 0,c.setPercentsAndDefaults(f),!0,b)}}else for(f=e.append("tr"),f.append("th").text(""),b.leaf&&f.append("th").text(""),f.append("th").text(""),f.append("th").attr("class","visible-xs visible-lg ts-md").text(Math.floor(b.passP)+"% passed"),
f.append("th").attr("class","text-right ts-lg").text("Pass"),f.append("th").attr("class","text-right ts-lg").text("Fail"),f.append("th").attr("class","text-right ts-lg").text("Other"),f.append("th").attr("class","text-right").text("Total"),c.addSummaryTotals(e,b,!1),h=0;h<b.children.length;h++)f=b.children[h],c.addStDetailedCountsTableRow(e.append("tr"),void 0,f.name,void 0,c.setPercentsAndDefaults(f),!1,b);d?($("#"+a+" span.rowsHide").show(),$("#"+a+" span.rowsShow").hide(),$("#"+a+" table.sbCountsTable tr.secRow").show()):
($("#"+a+" span.rowsHide").hide(),$("#"+a+" span.rowsShow").show(),$("#"+a+" table.sbCountsTable tr.secRow").hide());g&&($("#"+a+" span.rowsHide").hide(),$("#"+a+" span.rowsShow").hide());c.showBlock(a)},addSummaryTotals:function(a,b,c){a=a.append("tr").attr("class","statConfSummaryRow");a.append("th").attr("colspan",c?"2":"1").attr("class","text-right vtop").text("Summary");a.append("th").attr("class","vtop").text("Supported");0<b.total?(c=a.append("td").attr("class","vtop visible-xs visible-lg ts-md").append("div").attr("class",
"test-meter").style("width","60.95px"),c.append("span").attr("class",(0<b.pass?"test-pass":"test-pass-nb")+" vtop").style("width",b.passP+"%").text("").attr("title",b.pass+" of "+b.total+" interactions passed"),c.append("span").attr("class",(0<b.fail?"test-fail":"test-fail-nb")+" vtop").style("width",b.failP+"%").text("").attr("title",b.fail+" of "+b.total+" interactions failed"),c.append("span").attr("class","test-not-started vtop").style("width",b.restP+"%").attr("title",b.restN+" of "+b.total+
" interactions not started"),a.append("td").attr("class","text-right vtop ts-lg").text(ts.formatNumber(b.pass)).attr("title",b.pass+" of "+b.total+" interactions passed"),a.append("td").attr("class","text-right vtop ts-lg").text(ts.formatNumber(b.fail)).attr("title",b.fail+" of "+b.total+" interactions failed"),a.append("td").attr("class","text-right vtop ts-lg").text(ts.formatNumber(b.restN)).attr("title",b.restN+" of "+b.total+" interactions not started"),a.append("td").attr("class","text-right vtop").text(ts.formatNumber(b.total))):
(a.append("td").attr("class","visible-xs visible-lg ts-md").text(""),a.append("td").attr("class","ts-lg").text(""),a.append("td").attr("class","ts-lg").text(""),a.append("td").attr("class","ts-lg").text(""),a.append("td").text(""))},addStDetailedCountsTableRow:function(a,b,d,g,e,f,h){a.attr("class","secRow");a.append("td").attr("class","text-right vtop").style("width","100px").html(ts.addWbrToCamelCase(d));if(f&&(d=a.append("td").attr("class","vtop").style("width","100px"),g&&(d.append("div").html(ts.addWbrToCamelCase(g)),
void 0!=b&&e.formats)))for(g=0;g<e.formats.length;g++)if(e.formats[g].racps)for(f=0;f<e.formats[g].racps.length;f++)d.append("div").attr("class","m-l-6").html(e.formats[g].racps[f].name+" \x3ci class\x3d'm-l-3 fa fa-"+(e.formats[g].racps[f].unsupp?"times":"check")+" aria-hidden\x3d'true'\x3e\x3c/i\x3e");h.leaf?(b=c.getCross(b,e,h),a.append("td").attr("class","vtop text-center").html('\x3ci class\x3d"fa fa-'+(b?"times":"check")+'" aria-hidden\x3d"true"\x3e\x3c/i\x3e')):a.append("td").attr("class",
"vtop text-center").html('\x3ci class\x3d"fa fa-'+(0<e.total?"check":"times")+'" aria-hidden\x3d"true"\x3e\x3c/i\x3e');0<e.total?(b=a.append("td").attr("class","vtop visible-xs visible-lg ts-md").append("div").attr("class","test-meter").style("width","60.95px"),b.append("span").attr("class",(0<e.pass?"test-pass":"test-pass-nb")+" vtop").style("width",e.passP+"%").text("").attr("title",e.pass+" of "+e.total+" interactions passed"),b.append("span").attr("class",(0<e.fail?"test-fail":"test-fail-nb")+
" vtop").style("width",e.failP+"%").text("").attr("title",e.fail+" of "+e.total+" interactions failed"),b.append("span").attr("class","test-not-started vtop").style("width",e.restP+"%").attr("title",e.restN+" of "+e.total+" interactions not started"),a.append("td").attr("class","text-right vtop ts-lg").text(ts.formatNumber(e.pass)).attr("title",e.pass+" of "+e.total+" interactions passed"),a.append("td").attr("class","text-right vtop ts-lg").text(ts.formatNumber(e.fail)).attr("title",e.fail+" of "+
e.total+" interactions failed"),a.append("td").attr("class","text-right vtop ts-lg").text(ts.formatNumber(e.restN)).attr("title",e.restN+" of "+e.total+" interactions not started"),a.append("td").attr("class","text-right vtop").text(ts.formatNumber(e.total))):(a.append("td").attr("class","visible-xs visible-lg ts-md").text(""),a.append("td").attr("class","ts-lg").text(""),a.append("td").attr("class","ts-lg").text(""),a.append("td").attr("class","ts-lg").text(""),a.append("td").text(""));return a},
setPercentsAndDefaults:function(a){a||(a={});a.pass=a.pass?a.pass:0;a.fail=a.fail?a.fail:0;a.total=a.total?a.total:0;a.restN=a.total-a.pass-a.fail;a.passP=0<a.total?(a.pass/a.total*100).toPrecision(3):0;a.failP=0<a.total?(a.fail/a.total*100).toPrecision(3):0;a.restP=0<a.total?(a.restN/a.total*100).toPrecision(3):0;return a},getCross:function(a,b,d){a=!1;if(d.leaf){d=[];var g=[];if(b.formats&&0<b.formats.length)for(var e=0;e<b.formats.length;e++){var f=c.getCt(b.formats[e].ct);b.formats[e].unsupp?
g.push(f):d.push(f)}0<g.length&&(a=!0)}else 0==b.total?a=!0:b.total<b.size&&(a=!0);return a},fadeAllBands:function(a){d3.selectAll("#"+a.contId+" path").style("opacity",c.fadedOpacity).style("stroke",c.defaultStrokeColor).style("stroke-width",c.defaultStrokeWidth)},highlightSelfAndDescendants:function(a,b){c.fadeAllBands(b);d3.selectAll("#"+b.contId+" path").filter(function(b){return 0<=a.indexOf(b)}).style("opacity",c.hoverOpacity).style("stroke",c.hoverBandStrokeColor).style("stroke-width",c.hoverBandStrokeWidth)},
collectDescendantAndLeafInfo:function(a,b){b||(b={selfAndDescendants:[],leafNodes:[],leafAcps:[]});b.selfAndDescendants.push(a);if(a.leaf){if(b.leafNodes.push(a),a.operations)for(var d in a.operations)0>b.leafAcps.indexOf(d)&&b.leafAcps.push(d)}else if(a.children&&0<a.children.length){d=0;for(var g=a.children.length;d<g;d++)c.collectDescendantAndLeafInfo(a.children[d],b)}return b},getStatusForeground:function(a){return 0==a.pass&&0==a.fail?"#000":0==a.fail?(a=a.pass/a.total,1==a?"#e8e8e8":.4<=a?"#323232":
"#315904"):0<a.fail?.75<=a.fail/a.total?"#fff":"#407406":"#000"},getStatusBackground:function(a){return 0==a.total?"#f4f4f4":0==a.pass&&0==a.fail?"#dadada":0==a.fail?(a=a.pass/a.total,1==a?"#547452":.95<=a?"#698366":.9<=a?"#728C70":.8<=a?"#829980":.75<=a?"#92A690":.7<=a?"#A1B29F":.6<=a?"#B1BFAF":"#C0CBBE"):0<a.fail?(a=a.fail/a.total,1==a?"#9D4752":.95<=a?"#A45660":.9<=a?"#AC636D":.8<=a?"#B3717A":.75<=a?"#BB8087":.7<=a?"#C28E95":.6<=a?"#C99BA2":.55<=a?"#D1AAAF":.5<=a?"#D8B9BD":"#E0C6CA"):"#FFFF00"},
getCt:function(a){a=void 0!=a?a.toUpperCase():"";return-1<a.indexOf("PATCH")?a:c.isFhir&&"NONE"!=a?"FHIR-"+a:a},showBlock:function(a){$("#"+a).css("display","block")},noOp:function(){}}})();