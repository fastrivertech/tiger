<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="ba990449-0ece-43c1-b578-926a557add54" activeEnvironment="Default" name="CONNECTATHON20_FHIR_TEST_01" resourceRoot="" soapui-version="5.5.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.TestRunnerAction@values-local"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="Export JUnit Results" value="false"/>
  <con:entry key="Export All" value="false"/>
  <con:entry key="Save After" value="false"/>
  <con:entry key="Add Settings" value="false"/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="TestSuite" value="TestSuiteCRDPatient"/>
  <con:entry key="Endpoint" value=""/>
  <con:entry key="Select Report Type" value=""/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Password" value=""/>
  <con:entry key="Print Report" value="false"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Export JUnit Results with test properties" value="false"/>
  <con:entry key="Global Properties" value=""/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="TestCase" value="&lt;all>"/>
  <con:entry key="Username" value=""/>
  <con:entry key="user-settings.xml Password" value=""/>
  <con:entry key="TestRunner Path" value=""/>
  <con:entry key="Environment" value="Default"/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="Enable UI" value="false"/>
  <con:entry key="Root Folder" value=""/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Save Project" value="false"/>
</xml-fragment>]]></con:setting></con:settings><con:interface xsi:type="con:RestService" id="b031a5dc-f434-4d3e-ba6a-99d716e993ae" wadlVersion="http://wadl.dev.java.net/2009/02" name="FHIR4-0-0-Connectathon20-Patient-01-Intro" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:description>FHIR4-0-0-Connectathon20-Patient-01-Intro Base Test</con:description><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:endpoint>${#Project#Service.Remote.Endpoint}</con:endpoint></con:endpoints><con:resource name="PatientRetrieve" path="/${#Project#Service.Resource.Path}/${#Project#CD16}" id="ebb69a5a-2d02-4a02-a665-6042a6ee1b05"><con:settings/><con:parameters/><con:method name="RegisterNewPatient" id="75f0dd26-1b61-41ec-87c7-010979be5f66" method="PUT"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/fhir+json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/fhir+json;charset=utf-8</con:mediaType><con:status>201</con:status><con:params/><con:element xmlns:pat="http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient">pat:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>405</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/fhir+json;charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element xmlns:pat="http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient">pat:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/fhir+json</con:mediaType><con:status>201</con:status><con:params/><con:element xmlns:pat="http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient">pat:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:pat="http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient">pat:Fault</con:element></con:representation><con:request name="UpdateCreatePatient" id="d4297414-09e1-4c0a-8fe5-2c87aaf5b7a8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Accept" value="application/fhir+json;charset=utf-8"/>
  &lt;con:entry key="Content-Type" value="application/fhir+json"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request><![CDATA[{
  "resourceType" : "Patient",
  "id" : "${#Project#CD16}",
  "text" : {
    "status" : "generated",
    "div" : "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n    <table>\n        <tbody>\n          <tr>\n            <td>Name</td>\n            <td>Peter James <b>Chalmers</b> (&quot;Jim&quot;)</td>\n          </tr>\n          <tr>\n            <td>Address</td>\n            <td>534 Erewhon, Pleasantville, Vic, 3999</td>\n          </tr>\n          <tr>\n            <td>Contacts</td>\n            <td>Home: unknown. Work: (03) 5555 6473</td>\n          </tr>\n          <tr>\n            <td>Id</td>\n            <td>MR: 12345 (Acme Healthcare)</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>"
  },
  "identifier" : [ {
    "use" : "usual",
    "type" : {
      "coding" : [ {
        "system" : "http://terminology.hl7.org/CodeSystem/v2-0203",
        "code" : "MR"
      } ]
    },
    "system" : "urn:oid:1.2.36.146.595.217.0.1",
    "value" : "${#Project#CD16}",
    "period" : {
      "start" : "2001-05-06"
    },
    "assigner" : {
      "display" : "Acme Healthcare"
    }
  } ],
  "active" : true,
  "name" : [ {
    "use" : "official",
    "family" : "Chalmers${#Project#C8}",
    "given" : [ "Peter${#Project#C8}", "James${#Project#C8}" ]
  }, {
    "use" : "usual",
    "given" : [ "Jim" ]
  } ],
  "telecom" : [ {
    "use" : "home"
  }, {
    "system" : "phone",
    "value" : "(03) 5555 6473",
    "use" : "work"
  } ],
  "gender" : "male",
  "birthDate" : "1974-12-25",
  "deceasedBoolean" : false,
  "address" : [ {
    "use" : "home",
    "line" : [ "534 Erewhon${#Project#C9} St" ],
    "city" : "PleasantVille",
    "state" : "Vic",
    "postalCode" : "${#Project#D4}"
  } ],
  "contact" : [ {
    "relationship" : [ {
      "coding" : [ {
        "system" : "http://terminology.hl7.org/CodeSystem/v2-0131",
        "code" : "C"
      } ]
    } ],
    "name" : {
      "family" : "du Marché",
      "given" : [ "Bénédicte" ]
    },
    "telecom" : [ {
      "system" : "phone",
      "value" : "+33 (237) 998327"
    } ]
  } ]
}
]]></con:request><con:originalUri>http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method><con:method name="RetrievePatient" id="a8553dce-4f57-4db9-8a64-b1029c912a8b" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json;charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:pat="http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient">pat:Response</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/fhir+json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=utf-8</con:mediaType><con:status>410</con:status><con:params/><con:element xmlns:pat="http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient">pat:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:pat="http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient">pat:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/fhir+json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/fhir+json;charset=UTF-8</con:mediaType><con:status>410</con:status><con:params/></con:representation><con:request name="GetPatientByID" id="b4ee2d28-6ce3-46d5-9677-775cb33c7bda" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Accept" value="application/fhir+json"/>
  &lt;con:entry key="Content-Type" value="application/fhir+json"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request/><con:originalUri>http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:request></con:method><con:method name="DeletePatient" id="dadbf800-4d63-41ff-88ea-cc141fca1a18" method="DELETE"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/fhir+json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:cre="http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient/CREATE-PT-0001">cre:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>405</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/fhir+json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:cre="http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient/CREATE-PT-0001">cre:Response</con:element></con:representation><con:request name="DeletePatient" id="c499e719-154b-4c90-832a-cb589b399159" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request/><con:originalUri>http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient/CREATE-PT-0001</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method><con:method name="UpdatePatient" id="9f020510-bebe-45ab-8682-2274113abdd9" method="PUT"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>500 405</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=utf-8</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:cre="http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient/CREATE-PT-0001">cre:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/fhir+json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:cre="http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient/CREATE-PT-0001">cre:Response</con:element></con:representation><con:request name="UpdatePatient" id="37c078af-4f63-4844-904b-f00622e767fc" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request><![CDATA[{
  "resourceType" : "Patient",
  "id" : "CD16",
  "text" : {
    "status" : "generated",
    "div" : "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n    <table>\n        <tbody>\n          <tr>\n            <td>Name</td>\n            <td>Peter James <b>Chalmers</b> (&quot;Jim&quot;)</td>\n          </tr>\n          <tr>\n            <td>Address</td>\n            <td>534 Erewhon, Pleasantville, Vic, 3999</td>\n          </tr>\n          <tr>\n            <td>Contacts</td>\n            <td>Home: unknown. Work: (03) 5555 6473</td>\n          </tr>\n          <tr>\n            <td>Id</td>\n            <td>MR: 12345 (Acme Healthcare)</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>"
  },
  "identifier" : [ {
    "use" : "usual",
    "type" : {
      "coding" : [ {
        "system" : "http://terminology.hl7.org/CodeSystem/v2-0203",
        "code" : "MR"
      } ]
    },
    "system" : "urn:oid:1.2.36.146.595.217.0.1",
    "value" : "${CD16}",
    "period" : {
      "start" : "2001-05-06"
    },
    "assigner" : {
      "display" : "Acme Healthcare"
    }
  } ],
  "active" : true,
  "name" : [ {
    "use" : "official",
    "family" : "Chalmers${C8}",
    "given" : [ "Peter${C8}", "James${C8}" ]
  }, {
    "use" : "usual",
    "given" : [ "Jim" ]
  } ],
  "telecom" : [ {
    "use" : "home"
  }, {
    "system" : "phone",
    "value" : "(03) 5555 6473",
    "use" : "work"
  } ],
  "gender" : "male",
  "birthDate" : "1975-01-02",
  "deceasedBoolean" : false,
  "address" : [ {
    "use" : "home",
    "line" : [ "534 Erewhon${C9} St" ],
    "city" : "PleasantVille",
    "state" : "Vic",
    "postalCode" : "${D4}"
  } ],
  "contact" : [ {
    "relationship" : [ {
      "coding" : [ {
        "system" : "http://terminology.hl7.org/CodeSystem/v2-0131",
        "code" : "C"
      } ]
    } ],
    "name" : {
      "family" : "du Marché",
      "given" : [ "Bénédicte" ]
    },
    "telecom" : [ {
      "system" : "phone",
      "value" : "+33 (237) 998327"
    } ]
  } ]
}
]]></con:request><con:originalUri>http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient/CREATE-PT-0001</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:request></con:method></con:resource><con:resource name="PatientHistory" path="/${#Project#Service.Resource.Path}/${#Project#CD16}/_history" id="7557ac42-789a-4c2c-a6d0-61784602cab2"><con:settings/><con:parameters/><con:method name="HistoryPatient" id="6328a6e3-6137-4f27-a4e9-74a22fe12990" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>500</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/fhir+json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/fhir+json;charset=UTF-8</con:mediaType><con:status>404</con:status><con:params/></con:representation><con:request name="HistoryPatient" id="a6c023d9-609a-4663-8dcd-f05e6eb0705f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost//frt-fhir-rest/1.0/Patient/CREATE-PT-ID-PUT/_history</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="PatientQuery" path="/${#Project#Service.Resource.Path}" id="0ae7149d-f60e-4770-9f0c-cb1a6e679e27"><con:settings/><con:parameters><con:parameter><con:name>#Project#Service.Resource.Path</con:name><con:value>#Project#Service.Resource.Path</con:value><con:style>TEMPLATE</con:style><con:default>#Project#Service.Resource.Path</con:default></con:parameter><con:parameter><con:name>family</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>given</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="SearchPatient" id="e40f091f-e7da-41bf-abd0-4cdfee2e73c6" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/fhir+json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:request name="QueryPatientByParams" id="cbfcc978-8a07-4bff-95ac-839c4d55c702" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="given" value="Peter${#Project#C8}"/>
  <con:entry key="family" value="Chalmers${#Project#C8}"/>
</con:parameters><con:parameterOrder><con:entry>#Project#Service.Resource.Path</con:entry><con:entry>family</con:entry><con:entry>given</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="PatientCreate" path="/${#Project#Service.Resource.Path}" id="4f33b046-4626-4e92-b033-cde8bdcc6468"><con:settings/><con:parameters/><con:method name="RegisterNewPatient" id="1cb54843-c9f0-4665-be6c-d98bbd5655b9" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/fhir+json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/fhir+json;charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element xmlns:pat="http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient">pat:Response</con:element></con:representation><con:request name="CreatePatient" id="b36d0aa3-231f-4ea6-bd29-8f2be9ebb3df" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request><![CDATA[{
  "resourceType" : "Patient",
  "text" : {
    "status" : "generated",
    "div" : "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n    <table>\n        <tbody>\n          <tr>\n            <td>Name</td>\n            <td>Peter James <b>Chalmers</b> (&quot;Jim&quot;)</td>\n          </tr>\n          <tr>\n            <td>Address</td>\n            <td>534 Erewhon, Pleasantville, Vic, 3999</td>\n          </tr>\n          <tr>\n            <td>Contacts</td>\n            <td>Home: unknown. Work: (03) 5555 6473</td>\n          </tr>\n          <tr>\n            <td>Id</td>\n            <td>MR: 12345 (Acme Healthcare)</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>"
  },
  "identifier" : [ {
    "use" : "usual",
    "type" : {
      "coding" : [ {
        "system" : "http://terminology.hl7.org/CodeSystem/v2-0203",
        "code" : "MR"
      } ]
    },
    "system" : "urn:oid:1.2.36.146.595.217.0.1",
    "value" : "${#Project#CD16}",
    "period" : {
      "start" : "2001-05-06"
    },
    "assigner" : {
      "display" : "Acme Healthcare"
    }
  } ],
  "active" : true,
  "name" : [ {
    "use" : "official",
    "family" : "Chalmers${#Project#C8}",
    "given" : [ "Peter${#Project#C8}", "James${#Project#C8}" ]
  }, {
    "use" : "usual",
    "given" : [ "Jim" ]
  } ],
  "telecom" : [ {
    "use" : "home"
  }, {
    "system" : "phone",
    "value" : "(03) 5555 6473",
    "use" : "work"
  } ],
  "gender" : "male",
  "birthDate" : "1974-12-25",
  "deceasedBoolean" : false,
  "address" : [ {
    "use" : "home",
    "line" : [ "534 Erewhon${#Project#C9} St" ],
    "city" : "PleasantVille",
    "state" : "Vic",
    "postalCode" : "${#Project#D4}"
  } ],
  "contact" : [ {
    "relationship" : [ {
      "coding" : [ {
        "system" : "http://terminology.hl7.org/CodeSystem/v2-0131",
        "code" : "C"
      } ]
    } ],
    "name" : {
      "family" : "du Marché",
      "given" : [ "Bénédicte" ]
    },
    "telecom" : [ {
      "system" : "phone",
      "value" : "+33 (237) 998327"
    } ]
  } ]
}
]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="PatientQueryByIDParam" path="/${#Project#Service.Resource.Path}" id="0ae7149d-f60e-4770-9f0c-cb1a6e679e27"><con:settings/><con:parameters><con:parameter><con:name>#Project#Service.Resource.Path</con:name><con:value>#Project#Service.Resource.Path</con:value><con:style>TEMPLATE</con:style><con:default>#Project#Service.Resource.Path</con:default></con:parameter><con:parameter><con:name>id</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="SearchPatient" id="e40f091f-e7da-41bf-abd0-4cdfee2e73c6" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/fhir+json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:request name="QueryPatientByParamID" id="cbfcc978-8a07-4bff-95ac-839c4d55c702" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="${#Project#CD16}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>#Project#Service.Resource.Path</con:entry><con:entry>id</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:testSuite id="df7ca86e-9b1a-4fcb-98e0-25a944f51c40" name="FHIR4-0-0-Connectathon20-Patient-01-Intro-TestSuite"><con:description>TestSuite generated for REST Service [FRT FHIR SERVER]</con:description><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="e8a7a04b-c3db-4a54-b94a-986049621fd4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Patient-01-Intro-Client-Id" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Step1.1-UpdateCreatePatient" id="c89f1412-0ce7-4627-86fb-ec5b384d2b4a"><con:settings/><con:config service="FHIR4-0-0-Connectathon20-Patient-01-Intro" resourcePath="/${#Project#Service.Resource.Path}/${#Project#CD16}" methodName="RegisterNewPatient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Step1.1-UpdateCreatePatient" id="d4297414-09e1-4c0a-8fe5-2c87aaf5b7a8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Accept" value="application/fhir+json;charset=utf-8"/>
  &lt;con:entry key="Content-Type" value="application/fhir+json"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request><![CDATA[{
  "resourceType" : "Patient",
  "id" : "${#Project#CD16}",
  "text" : {
    "status" : "generated",
    "div" : "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n    <table>\n        <tbody>\n          <tr>\n            <td>Name</td>\n            <td>Peter James <b>Chalmers</b> (&quot;Jim&quot;)</td>\n          </tr>\n          <tr>\n            <td>Address</td>\n            <td>534 Erewhon, Pleasantville, Vic, 3999</td>\n          </tr>\n          <tr>\n            <td>Contacts</td>\n            <td>Home: unknown. Work: (03) 5555 6473</td>\n          </tr>\n          <tr>\n            <td>Id</td>\n            <td>MR: 12345 (Acme Healthcare)</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>"
  },
  "identifier" : [ {
    "use" : "usual",
    "type" : {
      "coding" : [ {
        "system" : "http://terminology.hl7.org/CodeSystem/v2-0203",
        "code" : "MR"
      } ]
    },
    "system" : "urn:oid:1.2.36.146.595.217.0.1",
    "value" : "${#Project#CD16}",
    "period" : {
      "start" : "2001-05-06"
    },
    "assigner" : {
      "display" : "Acme Healthcare"
    }
  } ],
  "active" : true,
  "name" : [ {
    "use" : "official",
    "family" : "Chalmers${#Project#C8}",
    "given" : [ "Peter${#Project#C8}", "James${#Project#C8}" ]
  }, {
    "use" : "usual",
    "given" : [ "Jim" ]
  } ],
  "telecom" : [ {
    "use" : "home"
  }, {
    "system" : "phone",
    "value" : "(03) 5555 6473",
    "use" : "work"
  } ],
  "gender" : "male",
  "birthDate" : "1974-12-25",
  "deceasedBoolean" : false,
  "address" : [ {
    "use" : "home",
    "line" : [ "534 Erewhon${#Project#C9} St" ],
    "city" : "PleasantVille",
    "state" : "Vic",
    "postalCode" : "${#Project#D4}"
  } ],
  "contact" : [ {
    "relationship" : [ {
      "coding" : [ {
        "system" : "http://terminology.hl7.org/CodeSystem/v2-0131",
        "code" : "C"
      } ]
    } ],
    "name" : {
      "family" : "du Marché",
      "given" : [ "Bénédicte" ]
    },
    "telecom" : [ {
      "system" : "phone",
      "value" : "+33 (237) 998327"
    } ]
  } ]
}
]]></con:request><con:originalUri>http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="db4c2c94-6b1a-41c0-b7d1-2e7e7de1323f" name="Response Codes 200, 201"><con:configuration><codes>200,201</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="efe7ef6e-fe49-4b42-96d2-d689dc2e4f4a" name="Response ETag header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["ETag"] != null</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="d07d8f37-22f2-468a-9575-aa5ae362de52" name="Response Last-Modified header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["Last-Modified"] != null</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="a9bdfdd3-3cf0-4277-8ae4-14559e9bdeaf" name="Response Content-Type header is application/fhir+json"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["Content-Type"]).get(0).contains("application/fhir+json")</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="1e9ec8b6-f6cf-49bc-ab62-9cb04c65e028" name="Response Content-Type header contains UTF-8"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["Content-Type"]).get(0).contains("charset=UTF-8")</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="00acefa1-760a-4430-bf95-896c05d18838" name="Response resource type is Patient"><con:configuration><path>resourceType</path><content>Patient</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="a5356ee8-ef3a-4df3-94d5-59f5ee45fae0" name="Response meta.versionId presents"><con:configuration><path>meta.versionId</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="90d27da1-c1d7-4d43-94ce-00dbb811f700" name="Response meta.lastUpdated presents"><con:configuration><path>meta.lastUpdated</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Step1.2-ReadPatientAfterCreate" id="f706bcec-0691-48be-9a80-1f7da73ee4dd"><con:settings/><con:config service="FHIR4-0-0-Connectathon20-Patient-01-Intro" resourcePath="/${#Project#Service.Resource.Path}/${#Project#CD16}" methodName="RetrievePatient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Step1.2-ReadPatientAfterCreate" id="7d61567d-4079-4fe3-8c2b-27e2736dfca6" mediaType="application/fhir+json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost//frt-fhir-rest/1.0/Patient/CREATE-PT-ID-PUT</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="aa999ceb-a2de-416b-bdc5-fd5180d9ac19" name="Response Codes 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="c7996250-5f24-449a-a947-adbf7766d153" name="Response Content Type header is application/json"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["Content-Type"]).get(0).contains("application/fhir+json")</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="cce3c463-345e-4568-99a7-8543dcf2fd60" name="Response ETag header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["ETag"] != null</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="90c20abf-6587-4bee-af3e-e5fe7fae0480" name="Response Last-Modifies header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["Last-Modified"] != null</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8ffc6b0d-62c0-47c7-a567-ae95e9fefc0f" name="Response body conforms FHIR patient-porifle"><con:configuration><scriptText>true</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="a985ea0c-11be-4e80-bd17-a1637b935973" name="Response Resource type is Patient"><con:configuration><path>resourceType</path><content>Patient</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="4f92266b-98bd-417a-840d-34f3c1b0e301" name="Response has patient-create-PeterChalmers-min"><con:configuration><scriptText>import groovy.json.*

def respJson = context.parser.parseText(messageExchange.response.responseContent)
assert respJson instanceof Map : "Json resource expected in response."
assert context.resourceContains("RESOURCE.TEMPLATE.BASE.DIR", "PT01INTRO.PT.CREATE.PETERCHALMERS.MIN.JSON", respJson)

</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Step2.1-UpdatePatient" id="8f5fcddb-0422-41d5-8da0-ebfaece2f780"><con:settings/><con:config service="FHIR4-0-0-Connectathon20-Patient-01-Intro" resourcePath="/${#Project#Service.Resource.Path}/${#Project#CD16}" methodName="UpdatePatient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Step2.1-UpdatePatient" id="37c078af-4f63-4844-904b-f00622e767fc" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request><![CDATA[{
  "resourceType" : "Patient",
  "id" : "${#Project#CD16}",
  "text" : {
    "status" : "generated",
    "div" : "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n    <table>\n        <tbody>\n          <tr>\n            <td>Name</td>\n            <td>Peter James <b>Chalmers</b> (&quot;Jim&quot;)</td>\n          </tr>\n          <tr>\n            <td>Address</td>\n            <td>534 Erewhon, Pleasantville, Vic, 3999</td>\n          </tr>\n          <tr>\n            <td>Contacts</td>\n            <td>Home: unknown. Work: (03) 5555 6473</td>\n          </tr>\n          <tr>\n            <td>Id</td>\n            <td>MR: 12345 (Acme Healthcare)</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>"
  },
  "identifier" : [ {
    "use" : "usual",
    "type" : {
      "coding" : [ {
        "system" : "http://terminology.hl7.org/CodeSystem/v2-0203",
        "code" : "MR"
      } ]
    },
    "system" : "urn:oid:1.2.36.146.595.217.0.1",
    "value" : "${#Project#CD16}",
    "period" : {
      "start" : "2001-05-06"
    },
    "assigner" : {
      "display" : "Acme Healthcare"
    }
  } ],
  "active" : true,
  "name" : [ {
    "use" : "official",
    "family" : "Chalmers${#Project#C8}",
    "given" : [ "Peter${#Project#C8}", "James${#Project#C8}" ]
  }, {
    "use" : "usual",
    "given" : [ "Jim" ]
  } ],
  "telecom" : [ {
    "use" : "home"
  }, {
    "system" : "phone",
    "value" : "(03) 5555 6473",
    "use" : "work"
  } ],
  "gender" : "male",
  "birthDate" : "1975-01-02",
  "deceasedBoolean" : false,
  "address" : [ {
    "use" : "home",
    "line" : [ "534 Erewhon${#Project#C9} St" ],
    "city" : "PleasantVille",
    "state" : "Vic",
    "postalCode" : "${#Project#D4}"
  } ],
  "contact" : [ {
    "relationship" : [ {
      "coding" : [ {
        "system" : "http://terminology.hl7.org/CodeSystem/v2-0131",
        "code" : "C"
      } ]
    } ],
    "name" : {
      "family" : "du Marché",
      "given" : [ "Bénédicte" ]
    },
    "telecom" : [ {
      "system" : "phone",
      "value" : "+33 (237) 998327"
    } ]
  } ]
}
]]></con:request><con:originalUri>http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient/CREATE-PT-0001</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="954994ac-b60a-4f94-bb89-0d27aa525971" name="Response Codes 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="72cb78d3-d708-4b72-ad19-31c1c2e00f45" name="Response ETage header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["ETag"] != null</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="12d9beac-881b-43a2-9612-93f32db5f24e" name="Response Last-Modified header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["Last-Modified"] != null</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="94666434-0ef7-4ee8-9768-2f484ec21820" name="Response ContentType header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["Content-Type"] != null</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="76a7f541-d8a1-4fa0-85df-068c17f4bffa" name="Response Content Type application-json presents"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["Content-Type"]).get(0).contains("application/fhir+json")</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="c73c947b-7f1c-40ad-9f76-c4008c200876" name="Response ContentType contains charset=UTF-8"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["Content-Type"]).get(0).contains("charset=UTF-8")</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="60312fac-d160-4764-bfc2-5894eb1d029d" name="Response body is patient"><con:configuration><path>resourceType</path><content>Patient</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="c585b63e-520a-4725-9c56-e0d144f1f974" name="Response body conforms FHIR operationoutcome-profile (skipped)"><con:configuration><scriptText>true</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="49a161c6-4f8f-4e10-b430-9ca9254db5d8" name="Response body conforms FHIR patient-profile"><con:configuration><scriptText>true</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="e52e6942-b553-4c30-b264-bd8029b8dee4" name="Response meta.versionId presents"><con:configuration><path>meta.versionId</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Step2.2-ReadPatientAfterUpdate" id="2984dd14-13b3-41f2-b6d1-26939fb127f7"><con:settings/><con:config service="FHIR4-0-0-Connectathon20-Patient-01-Intro" resourcePath="/${#Project#Service.Resource.Path}/${#Project#CD16}" methodName="RetrievePatient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Step2.2-ReadPatientAfterUpdate" id="7d61567d-4079-4fe3-8c2b-27e2736dfca6" mediaType="application/fhir+json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost//frt-fhir-rest/1.0/Patient/CREATE-PT-ID-PUT</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="aa999ceb-a2de-416b-bdc5-fd5180d9ac19" name="Response Codes 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="c7996250-5f24-449a-a947-adbf7766d153" name="Response Content Type header is application/json"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["Content-Type"]).get(0).contains("application/fhir+json")</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="cce3c463-345e-4568-99a7-8543dcf2fd60" name="Response ETag header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["ETag"] != null</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="90c20abf-6587-4bee-af3e-e5fe7fae0480" name="Response Last-Modifies header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["Last-Modified"] != null</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8ffc6b0d-62c0-47c7-a567-ae95e9fefc0f" name="Response body conforms FHIR patient-porifle"><con:configuration><scriptText>true</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="a985ea0c-11be-4e80-bd17-a1637b935973" name="Response Resource type is Patient"><con:configuration><path>resourceType</path><content>Patient</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="4f92266b-98bd-417a-840d-34f3c1b0e301" name="Response has patient-update-PeterChalmers-min"><con:configuration><scriptText>import groovy.json.*

def respJson = context.parser.parseText(messageExchange.response.responseContent)
log.info("respJson"+respJson)
assert respJson instanceof Map : "Json resource expected in response."
assert context.resourceContains("RESOURCE.TEMPLATE.BASE.DIR", "PT01INTRO.PT.UPDATE.PETERCHALMERS.MIN.JSON", respJson)

</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="9f2cc719-7a1b-4602-80f1-60e83a7eae72" name="Response Patient/birthDate"><con:configuration><path>birthDate</path><content>1975-01-02</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Step3-HistoryPatient" id="9da36753-5251-4750-949d-1cb1c2add87e"><con:settings/><con:config service="FHIR4-0-0-Connectathon20-Patient-01-Intro" resourcePath="/${#Project#Service.Resource.Path}/${#Project#CD16}/_history" methodName="HistoryPatient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Step3-HistoryPatient" id="a6c023d9-609a-4663-8dcd-f05e6eb0705f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost//frt-fhir-rest/1.0/Patient/CREATE-PT-ID-PUT/_history</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7d6a0a4b-2477-492a-bc82-3f9bececde1c" name="Response Codes 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="65c2f8f9-3b29-495c-9162-68730c4829fc" name="Response Content-Type header is application/json"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["Content-Type"]).get(0).contains("application/fhir+json")</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="d680c5d8-8acc-44e4-b2ec-b2e4bed272b0" name="Response Resource type is Bundle"><con:configuration><path>resourceType</path><content>Bundle</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ff5ec4b2-5c0e-492d-b8d9-4ffb4e454d56" name="Response body conforms FHIR bundle-profile"><con:configuration><scriptText>true</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="72c86827-e2d2-4d1c-b263-8c2d6c800526" name="Response Bundle/type is history"><con:configuration><path>type</path><content>history</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="e395928b-def3-4517-a8da-68401f2a7d39" name="Response Bundle/total > 0"><con:configuration><scriptText>import net.sf.json.groovy.JsonSlurper
def parser = new JsonSlurper()
def result = parser.parseText(context.response)
def total = result.total as int
assert total > 0</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6275e9d7-c4b4-4075-94b7-807fa3cbe84d" name="Response  Bundle/total >= entry.count()"><con:configuration><scriptText>import net.sf.json.groovy.JsonSlurper
def parser = new JsonSlurper()
def result = parser.parseText(context.response)
def total = result.total as int
def entries = (List)result.entry
assert total >= entries.size()</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="581fa0a8-9e63-4191-8a9e-9ef20064a34a" name="Response contains patient-update-peterchalmers-min"><con:configuration><scriptText>import groovy.json.*

def respJson = context.parser.parseText(messageExchange.response.responseContent)
assert respJson instanceof Map : "Json resource expected in response."
def bundleEntry = respJson.get("entry")
assert bundleEntry!=null
assert bundleEntry instanceof List
assert bundleEntry.size() > 0
def entry = bundleEntry.get(0)
assert entry!=null
def returnedResource = entry.get("resource")
assert returnedResource!=null
assert context.resourceContains("RESOURCE.TEMPLATE.BASE.DIR", "PT01INTRO.PT.UPDATE.PETERCHALMERS.MIN.JSON", returnedResource)

</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Step4-SearchPatient" id="d65f3ae7-7929-440f-b8d6-ceab8ffaaf34"><con:settings/><con:config service="FHIR4-0-0-Connectathon20-Patient-01-Intro" resourcePath="/${#Project#Service.Resource.Path}" methodName="SearchPatient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Step4-SearchPatient" id="a6c023d9-609a-4663-8dcd-f05e6eb0705f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost//frt-fhir-rest/1.0/Patient/CREATE-PT-ID-PUT/_history</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7d6a0a4b-2477-492a-bc82-3f9bececde1c" name="Response Codes 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="65c2f8f9-3b29-495c-9162-68730c4829fc" name="Response Content-Type header is application/fhir+json"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["Content-Type"]).get(0).contains("application/fhir+json")</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="d680c5d8-8acc-44e4-b2ec-b2e4bed272b0" name="Response Resource type is Bundle"><con:configuration><path>resourceType</path><content>Bundle</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ff5ec4b2-5c0e-492d-b8d9-4ffb4e454d56" name="Response body conforms FHIR bundle-profile"><con:configuration><scriptText>true</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="72c86827-e2d2-4d1c-b263-8c2d6c800526" name="Response Bundle/type is searchset"><con:configuration><path>type</path><content>searchset</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="e395928b-def3-4517-a8da-68401f2a7d39" name="Response Bundle/total > 0"><con:configuration><scriptText>import net.sf.json.groovy.JsonSlurper
def parser = new JsonSlurper()
def result = parser.parseText(context.response)
def total = result.total as int
assert total > 0</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6275e9d7-c4b4-4075-94b7-807fa3cbe84d" name="Response  Bundle/total >= entry.count()"><con:configuration><scriptText>import net.sf.json.groovy.JsonSlurper
def parser = new JsonSlurper()
def result = parser.parseText(context.response)
def total = result.total as int
def entries = (List)result.entry
assert total >= entries.size()</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="581fa0a8-9e63-4191-8a9e-9ef20064a34a" name="Response contains patient-update-peterchalmers-min"><con:configuration><scriptText>import groovy.json.*

def respJson = context.parser.parseText(messageExchange.response.responseContent)
assert respJson instanceof Map : "Json resource expected in response."
def bundleEntry = respJson.get("entry")
assert bundleEntry!=null
assert bundleEntry instanceof List
assert bundleEntry.size() > 0
def entry = bundleEntry.get(0)
assert entry!=null
def returnedResource = entry.get("resource")
assert returnedResource!=null
assert context.resourceContains("RESOURCE.TEMPLATE.BASE.DIR", "PT01INTRO.PT.UPDATE.PETERCHALMERS.MIN.JSON", returnedResource)

</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="given" value="Peter${#Project#C8}"/>
  <con:entry key="family" value="Chalmers${#Project#C8}"/>
</con:parameters><con:parameterOrder><con:entry>#Project#Service.Resource.Path</con:entry><con:entry>family</con:entry><con:entry>given</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Step5.1-DeletePatient" id="832d4ca6-d6b9-44dd-8927-664a36474812"><con:settings/><con:config service="FHIR4-0-0-Connectathon20-Patient-01-Intro" resourcePath="/${#Project#Service.Resource.Path}/${#Project#CD16}" methodName="DeletePatient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Step5.1-DeletePatient" id="c499e719-154b-4c90-832a-cb589b399159" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request/><con:originalUri>http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient/CREATE-PT-0001</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b7fc9b43-ff4c-4232-8a82-94166650db19" name="HTTP Return Code 200 or 204 or 404"><con:configuration><codes>200,204,404</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ea4480ef-10a7-43a1-b1c8-97e076b8482f" name="Response ETag header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["ETag"] != null</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Step5.2-ReadPatientAfterDelete" id="937a0379-5a58-41c5-988b-346d72f093b7"><con:settings/><con:config service="FHIR4-0-0-Connectathon20-Patient-01-Intro" resourcePath="/${#Project#Service.Resource.Path}/${#Project#CD16}" methodName="RetrievePatient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Step5.2-ReadPatientAfterDelete" id="7d61567d-4079-4fe3-8c2b-27e2736dfca6" mediaType="application/fhir+json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost//frt-fhir-rest/1.0/Patient/CREATE-PT-ID-PUT</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="aa999ceb-a2de-416b-bdc5-fd5180d9ac19" name="Response Codes is Gone"><con:configuration><codes>404,410</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:setupScript><![CDATA[import groovy.json.*
import org.apache.commons.lang.RandomStringUtils

// random seeding template properties
context.seededProperties=[:]
def propNames = testRunner.testCase.project.propertyNames
for(n in propNames)
{
	log.info( "property name=" + n + ", value=" + testRunner.testCase.project.properties[n].value )
	def group=(n =~ /([CD]+)(\d+)/)
	log.info("group:" + group)
	log.info("group count:" + group.count)
	if (group.hasGroup()&&group.size()==1) {
		def seededValue = ''
		if (group[0].size()==3) {
			def alpha=group[0][1]
			def num=group[0][2]
			//log.info("alpha=" + alpha + ", num=" + num)
			def pattn='\\$\\{#Project#' + n + '\\}'
			//def propName='${#Project#'+n+'}'
			if (alpha=='C') {
				seededValue=RandomStringUtils.randomAlphabetic(num.toInteger())
			}
			else if (alpha=='D') {
				seededValue=RandomStringUtils.randomNumeric(num.toInteger())
			}
			else if (alpha=='CD') {
				seededValue=RandomStringUtils.randomAlphanumeric(num.toInteger())
			}
			if (seededValue!='') {
				context.seededProperties.put(pattn, seededValue)
				testRunner.testCase.project.setPropertyValue(n, seededValue)
			}
		}
	}
	else {
		log.info("Not a json template property, property skipped.")
	}
}

context.seededProperties.each {
	k, v ->
	log.info "$k :: $v"
}

context.genBoundedString={len ->
	def array = new byte[len]
	new java.util.Random().nextBytes(array)
	def str = new java.lang.String(array)
	return str
}

log.info("random string of len 16: " + RandomStringUtils.randomAlphabetic(16))

context.valueIdentical={v1, v2 ->
	log.info("OBJ1="+v1)
	log.info("OBJ2="+v2)
	def isIdentical=true
	if (v1!=null&&v2!=null) {
		log.info("Compare V1 V2: ")
		log.info("V1:::::" + v1)
		log.info("V2:::::" + v2)
		if (v1 instanceof List) {
			isIdentical=context.listIdentical(v1, v2)
		}
		else if (v1 instanceof Map) {
			isIdentical=context.mapIdentical(v1, v2)
		}
		else {
			// must be a primitive Int, Str
			log.info("Compare values : V1[" + v1 + "]==V2[" + v2 + "]")
			isIdentical=(v1==v2)
		}
	}
	else if (v1!=null||v2!=null) {
		isIdentical=false
	}
	return isIdentical
}
context.listIdentical={l1, l2 ->
     def isIdentical=true
	if (l1.size()==l2.size()) {
		isIdentical=context.listContains(l1, l2)&&context.listContains(l2, l1)
	}
	else {
		isIdentical=false
	}
	return isIdentical
}
context.listContains={l1, l2 ->
	def isContained = true
	if (l2.size()>=l1.size()) {
		def l = []
		for (e1 in l1) {
			def found = false;
			for (e2 in l2) {
				if (context.valueIdentical(e1, e2)) {
					l2.remove(e2)
					l.add(e2)
					found = true
					break;
				}
			}
			if (!found) {
				isContained = false
				break
			}
		}
		l2.addAll(l)
	}
	else {
		isContained = false
	}
	return isContained
}

context.mapIdentical={m1, m2 ->
     def isIdentical = false
	if (m1.size()==m2.size()) {
		isIdentical=context.mapContains(m1, m2)&&context.mapContains(m2, m1)	
	}
	return isIdentical
}

context.mapContains={m1, m2 ->
	log.info("m1="+m1)
	log.info("m2="+m2)
	log.info("m1.type=" + m1.type + ", m2.type" + m2.type)
	def isContained = true
	if (m2.size()>=m1.size()) {
		log.info("m1.size=" + m1.size() + ", m2.size=" + m2.size())
		for (e1 in m1) { 
	  		log.info "MAP1 K : V => ${e1.key} : ${e1.value}"
	  		def v2 = m2.get(e1.key)
	  		if (v2!=null) {
	  			log.info("MAP2 VALUE= $v2")
	  			if (!context.valueIdentical(e1.value, v2)) {
	  				isContained = false
	  				break
	  			}
	  		}
	  		else {
	  			isContained = false
	  			break
	  		}
		}
	}
	else {
		isContained = false
	}
	return isContained
}
context.parser = new JsonSlurper()
context.resourceContains={baseDirProp, pathProp, resp ->
	def projectPath = new com.eviware.soapui.support.GroovyUtils(context).projectPath
	log.info "ProjectPath:"+projectPath
	def baseDir = testRunner.testCase.project.properties[baseDirProp].value
	def path = testRunner.testCase.project.properties[pathProp].value
	def jsonFile = new File(projectPath, baseDir+path)
	assert jsonFile!=null
	def jsonTemplate = jsonFile.text
	assert jsonTemplate!=null
	log.info("json template:" + jsonTemplate)
	//log.info "iterate project properties================="
	//def projPropNames = testRunner.testCase.project.propertyNames
	def target=jsonTemplate
	//for(n in projPropNames)
	//{
//		log.info( "property name=" + n + ", value=" + testRunner.testCase.project.properties[n].value )
//		if (n.startsWith("C")||n.startsWith("D")) {
//			def pattern1='\\$\\{#Project#' + n + '\\}'
//			def propName='${#Project#'+n+'}'
//			target=target.replaceAll(pattern1, context.expand(propName))
//		}
//	}
	context.seededProperties.each {k, v ->
		target=target.replaceAll(k, v)
	}

	log.info("resolved json template:" + target)
	def min=context.parser.parseText(target)
	// note, resource is a Map
	log.info("min="+min)
	log.info("resp="+resp)
	log.info("min.type=" + min.type + ", resp.type" + resp.type)
	log.info("min is Map:" + (min instanceof Map) + ", is List:" + (min instanceof List))
	log.info("resp is Map:" + (resp instanceof Map) + ", is List:" + (resp instanceof List))
	return context.mapContains(min, resp)
}

]]></con:setupScript><con:properties/></con:testCase><con:testCase id="51f52867-0cf4-4629-a34f-779b97d4f7a9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Patient-01-Intro-Server-Id" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Step1.1-CreatePatient" id="cb38901d-9204-417a-8d60-b45fc51e235b"><con:settings/><con:config service="FHIR4-0-0-Connectathon20-Patient-01-Intro" resourcePath="/${#Project#Service.Resource.Path}" methodName="RegisterNewPatient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Step1.1-CreatePatient" id="d4297414-09e1-4c0a-8fe5-2c87aaf5b7a8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Accept" value="application/fhir+json;charset=utf-8"/>
  &lt;con:entry key="Content-Type" value="application/fhir+json"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request><![CDATA[{
  "resourceType" : "Patient",
  "id" : "${#Project#CD16}",
  "text" : {
    "status" : "generated",
    "div" : "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n    <table>\n        <tbody>\n          <tr>\n            <td>Name</td>\n            <td>Peter James <b>Chalmers</b> (&quot;Jim&quot;)</td>\n          </tr>\n          <tr>\n            <td>Address</td>\n            <td>534 Erewhon, Pleasantville, Vic, 3999</td>\n          </tr>\n          <tr>\n            <td>Contacts</td>\n            <td>Home: unknown. Work: (03) 5555 6473</td>\n          </tr>\n          <tr>\n            <td>Id</td>\n            <td>MR: 12345 (Acme Healthcare)</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>"
  },
  "identifier" : [ {
    "use" : "usual",
    "type" : {
      "coding" : [ {
        "system" : "http://terminology.hl7.org/CodeSystem/v2-0203",
        "code" : "MR"
      } ]
    },
    "system" : "urn:oid:1.2.36.146.595.217.0.1",
    "value" : "${#Project#CD16}",
    "period" : {
      "start" : "2001-05-06"
    },
    "assigner" : {
      "display" : "Acme Healthcare"
    }
  } ],
  "active" : true,
  "name" : [ {
    "use" : "official",
    "family" : "Chalmers${#Project#C8}",
    "given" : [ "Peter${#Project#C8}", "James${#Project#C8}" ]
  }, {
    "use" : "usual",
    "given" : [ "Jim" ]
  } ],
  "telecom" : [ {
    "use" : "home"
  }, {
    "system" : "phone",
    "value" : "(03) 5555 6473",
    "use" : "work"
  } ],
  "gender" : "male",
  "birthDate" : "1974-12-25",
  "deceasedBoolean" : false,
  "address" : [ {
    "use" : "home",
    "line" : [ "534 Erewhon${#Project#C9} St" ],
    "city" : "PleasantVille",
    "state" : "Vic",
    "postalCode" : "${#Project#D4}"
  } ],
  "contact" : [ {
    "relationship" : [ {
      "coding" : [ {
        "system" : "http://terminology.hl7.org/CodeSystem/v2-0131",
        "code" : "C"
      } ]
    } ],
    "name" : {
      "family" : "du Marché",
      "given" : [ "Bénédicte" ]
    },
    "telecom" : [ {
      "system" : "phone",
      "value" : "+33 (237) 998327"
    } ]
  } ]
}
]]></con:request><con:originalUri>http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="db4c2c94-6b1a-41c0-b7d1-2e7e7de1323f" name="Response Codes"><con:configuration><codes>200,201</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="efe7ef6e-fe49-4b42-96d2-d689dc2e4f4a" name="Response ETag header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["ETag"] != null</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="d07d8f37-22f2-468a-9575-aa5ae362de52" name="Response Last-Modified header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["Last-Modified"] != null</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="a9bdfdd3-3cf0-4277-8ae4-14559e9bdeaf" name="Response Content-Type header is application/fhir+json"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["Content-Type"]).get(0).contains("application/fhir+json")</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="1e9ec8b6-f6cf-49bc-ab62-9cb04c65e028" name="Response Content-Type header contains UTF-8"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["Content-Type"]).get(0).contains("charset=UTF-8")</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="00acefa1-760a-4430-bf95-896c05d18838" name="Response resource type is Patient"><con:configuration><path>resourceType</path><content>Patient</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="a5356ee8-ef3a-4df3-94d5-59f5ee45fae0" name="Response meta.versionId presents"><con:configuration><path>meta.versionId</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="90d27da1-c1d7-4d43-94ce-00dbb811f700" name="Response meta.lastUpdated presents"><con:configuration><path>meta.lastUpdated</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Step1.2-ReadPatientAfterCreate" id="064158a0-4614-400e-88fd-ffe475bd980c"><con:settings/><con:config service="FHIR4-0-0-Connectathon20-Patient-01-Intro" resourcePath="/${#Project#Service.Resource.Path}" methodName="SearchPatient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Step1.2-ReadPatientAfterCreate" id="7d61567d-4079-4fe3-8c2b-27e2736dfca6" mediaType="application/fhir+json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost//frt-fhir-rest/1.0/Patient/CREATE-PT-ID-PUT</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="aa999ceb-a2de-416b-bdc5-fd5180d9ac19" name="Response Codes 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="c7996250-5f24-449a-a947-adbf7766d153" name="Response Content Type header is application/fhir+json"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["Content-Type"]).get(0).contains("application/fhir+json")</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="cce3c463-345e-4568-99a7-8543dcf2fd60" name="Response ETag header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["ETag"] != null</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="90c20abf-6587-4bee-af3e-e5fe7fae0480" name="Response Last-Modifies header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["Last-Modified"] != null</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8ffc6b0d-62c0-47c7-a567-ae95e9fefc0f" name="Response body conforms FHIR bundle-porifle"><con:configuration><scriptText>true</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="a985ea0c-11be-4e80-bd17-a1637b935973" name="Response Resource type is Bundle"><con:configuration><path>resourceType</path><content>Bundle</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="4f92266b-98bd-417a-840d-34f3c1b0e301" name="Response has patient-create-PeterChalmers-min"><con:configuration><scriptText>import groovy.json.*

def respJson = context.parser.parseText(messageExchange.response.responseContent)
assert respJson instanceof Map : "Json resource expected in response."
def bundleEntry = respJson.get("entry")
assert bundleEntry!=null
assert bundleEntry instanceof List
assert bundleEntry.size() > 0
def entry = bundleEntry.get(0)
assert entry!=null
def returnedResource = entry.get("resource")
assert returnedResource!=null
assert context.resourceContains("RESOURCE.TEMPLATE.BASE.DIR", "PT01INTRO.PT.CREATE.PETERCHALMERS.MIN.JSON", returnedResource)

</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="given" value="Peter${#Project#C8}"/>
  <con:entry key="id" value="${#Project#CD16}"/>
  <con:entry key="family" value="Chalmers${#Project#C8}"/>
</con:parameters><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Step2.1-UpdatePatient" id="b00a93b1-aca7-4894-a384-989620645d3c"><con:settings/><con:config service="FHIR4-0-0-Connectathon20-Patient-01-Intro" resourcePath="/${#Project#Service.Resource.Path}/${#Project#CD16}" methodName="UpdatePatient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Step2.1-UpdatePatient" id="37c078af-4f63-4844-904b-f00622e767fc" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request><![CDATA[{
  "resourceType" : "Patient",
  "id" : "${#Project#CD16}",
  "text" : {
    "status" : "generated",
    "div" : "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n    <table>\n        <tbody>\n          <tr>\n            <td>Name</td>\n            <td>Peter James <b>Chalmers</b> (&quot;Jim&quot;)</td>\n          </tr>\n          <tr>\n            <td>Address</td>\n            <td>534 Erewhon, Pleasantville, Vic, 3999</td>\n          </tr>\n          <tr>\n            <td>Contacts</td>\n            <td>Home: unknown. Work: (03) 5555 6473</td>\n          </tr>\n          <tr>\n            <td>Id</td>\n            <td>MR: 12345 (Acme Healthcare)</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>"
  },
  "identifier" : [ {
    "use" : "usual",
    "type" : {
      "coding" : [ {
        "system" : "http://terminology.hl7.org/CodeSystem/v2-0203",
        "code" : "MR"
      } ]
    },
    "system" : "urn:oid:1.2.36.146.595.217.0.1",
    "value" : "${#Project#CD16}",
    "period" : {
      "start" : "2001-05-06"
    },
    "assigner" : {
      "display" : "Acme Healthcare"
    }
  } ],
  "active" : true,
  "name" : [ {
    "use" : "official",
    "family" : "Chalmers${#Project#C8}",
    "given" : [ "Peter${#Project#C8}", "James${#Project#C8}" ]
  }, {
    "use" : "usual",
    "given" : [ "Jim" ]
  } ],
  "telecom" : [ {
    "use" : "home"
  }, {
    "system" : "phone",
    "value" : "(03) 5555 6473",
    "use" : "work"
  } ],
  "gender" : "male",
  "birthDate" : "1975-01-02",
  "deceasedBoolean" : false,
  "address" : [ {
    "use" : "home",
    "line" : [ "534 Erewhon${#Project#C9} St" ],
    "city" : "PleasantVille",
    "state" : "Vic",
    "postalCode" : "${#Project#D4}"
  } ],
  "contact" : [ {
    "relationship" : [ {
      "coding" : [ {
        "system" : "http://terminology.hl7.org/CodeSystem/v2-0131",
        "code" : "C"
      } ]
    } ],
    "name" : {
      "family" : "du Marché",
      "given" : [ "Bénédicte" ]
    },
    "telecom" : [ {
      "system" : "phone",
      "value" : "+33 (237) 998327"
    } ]
  } ]
}
]]></con:request><con:originalUri>http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient/CREATE-PT-0001</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="954994ac-b60a-4f94-bb89-0d27aa525971" name="Response Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="72cb78d3-d708-4b72-ad19-31c1c2e00f45" name="Response ETage header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["ETag"] != null</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="12d9beac-881b-43a2-9612-93f32db5f24e" name="Response Last-Modified header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["Last-Modified"] != null</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="94666434-0ef7-4ee8-9768-2f484ec21820" name="Response ContentType header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["Content-Type"] != null</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="76a7f541-d8a1-4fa0-85df-068c17f4bffa" name="Response Content Type application-json presents"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["Content-Type"]).get(0).contains("application/fhir+json")</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="c73c947b-7f1c-40ad-9f76-c4008c200876" name="Response ContentType contains charset=UTF-8"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["Content-Type"]).get(0).contains("charset=UTF-8")</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="60312fac-d160-4764-bfc2-5894eb1d029d" name="Response body is patient"><con:configuration><path>resourceType</path><content>Patient</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="c585b63e-520a-4725-9c56-e0d144f1f974" name="Response body conforms FHIR operationoutcome-profile (skipped)"><con:configuration><scriptText>true</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="49a161c6-4f8f-4e10-b430-9ca9254db5d8" name="Response body conforms FHIR patient-profile"><con:configuration><scriptText>true</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="e52e6942-b553-4c30-b264-bd8029b8dee4" name="Response meta.versionId presents"><con:configuration><path>meta.versionId</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Step2.2-ReadPatientAfterUpdate" id="4e83241c-beeb-4bbf-ac93-acdf3d6257b3"><con:settings/><con:config service="FHIR4-0-0-Connectathon20-Patient-01-Intro" resourcePath="/${#Project#Service.Resource.Path}/${#Project#CD16}" methodName="RetrievePatient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Step2.2-ReadPatientAfterUpdate" id="7d61567d-4079-4fe3-8c2b-27e2736dfca6" mediaType="application/fhir+json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost//frt-fhir-rest/1.0/Patient/CREATE-PT-ID-PUT</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="aa999ceb-a2de-416b-bdc5-fd5180d9ac19" name="Response Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="c7996250-5f24-449a-a947-adbf7766d153" name="Response Content Type header is application/fhir+json"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["Content-Type"]).get(0).contains("application/fhir+json")</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="cce3c463-345e-4568-99a7-8543dcf2fd60" name="Response ETag header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["ETag"] != null</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="90c20abf-6587-4bee-af3e-e5fe7fae0480" name="Response Last-Modifies header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["Last-Modified"] != null</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8ffc6b0d-62c0-47c7-a567-ae95e9fefc0f" name="Response body conforms FHIR patient-porifle"><con:configuration><scriptText>true</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="a985ea0c-11be-4e80-bd17-a1637b935973" name="Response Resource type is Patient"><con:configuration><path>resourceType</path><content>Patient</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="4f92266b-98bd-417a-840d-34f3c1b0e301" name="Response has patient-update-PeterChalmers-min"><con:configuration><scriptText>import groovy.json.*

def respJson = context.parser.parseText(messageExchange.response.responseContent)
log.info("respJson"+respJson)
assert respJson instanceof Map : "Json resource expected in response."
assert context.resourceContains("RESOURCE.TEMPLATE.BASE.DIR", "PT01INTRO.PT.UPDATE.PETERCHALMERS.MIN.JSON", respJson)

</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="9f2cc719-7a1b-4602-80f1-60e83a7eae72" name="Response Patient/birthDate"><con:configuration><path>birthDate</path><content>1975-01-02</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Step3-HistoryPatient" id="f7ba8c75-f0de-4f30-a450-7d41b81b4233"><con:settings/><con:config service="FHIR4-0-0-Connectathon20-Patient-01-Intro" resourcePath="/${#Project#Service.Resource.Path}/${#Project#CD16}/_history" methodName="HistoryPatient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Step3-HistoryPatient" id="a6c023d9-609a-4663-8dcd-f05e6eb0705f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost//frt-fhir-rest/1.0/Patient/CREATE-PT-ID-PUT/_history</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7d6a0a4b-2477-492a-bc82-3f9bececde1c" name="Response Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="65c2f8f9-3b29-495c-9162-68730c4829fc" name="Response Content-Type header is application/fhir+json"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["Content-Type"]).get(0).contains("application/fhir+json")</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="d680c5d8-8acc-44e4-b2ec-b2e4bed272b0" name="Response Resource type is Bundle"><con:configuration><path>resourceType</path><content>Bundle</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ff5ec4b2-5c0e-492d-b8d9-4ffb4e454d56" name="Response body conforms FHIR bundle-profile"><con:configuration><scriptText>true</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="72c86827-e2d2-4d1c-b263-8c2d6c800526" name="Response Bundle/type is history"><con:configuration><path>type</path><content>history</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="e395928b-def3-4517-a8da-68401f2a7d39" name="Response Bundle/total > 0"><con:configuration><scriptText>import net.sf.json.groovy.JsonSlurper
def parser = new JsonSlurper()
def result = parser.parseText(context.response)
def total = result.total as int
assert total > 0</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6275e9d7-c4b4-4075-94b7-807fa3cbe84d" name="Response  Bundle/total >= entry.count()"><con:configuration><scriptText>import net.sf.json.groovy.JsonSlurper
def parser = new JsonSlurper()
def result = parser.parseText(context.response)
def total = result.total as int
def entries = (List)result.entry
assert total >= entries.size()</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="581fa0a8-9e63-4191-8a9e-9ef20064a34a" name="Response contains patient-update-peterchalmers-min"><con:configuration><scriptText>import groovy.json.*

def respJson = context.parser.parseText(messageExchange.response.responseContent)
assert respJson instanceof Map : "Json resource expected in response."
def bundleEntry = respJson.get("entry")
assert bundleEntry!=null
assert bundleEntry instanceof List
assert bundleEntry.size() > 0
def entry = bundleEntry.get(0)
assert entry!=null
def returnedResource = entry.get("resource")
assert returnedResource!=null
assert context.resourceContains("RESOURCE.TEMPLATE.BASE.DIR", "PT01INTRO.PT.UPDATE.PETERCHALMERS.MIN.JSON", returnedResource)
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Step4-SearchPatient" id="92d968ba-d920-4d75-b9c4-2b5d102b75b9"><con:settings/><con:config service="FHIR4-0-0-Connectathon20-Patient-01-Intro" resourcePath="/${#Project#Service.Resource.Path}" methodName="SearchPatient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Step4-SearchPatient" id="a6c023d9-609a-4663-8dcd-f05e6eb0705f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost//frt-fhir-rest/1.0/Patient/CREATE-PT-ID-PUT/_history</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7d6a0a4b-2477-492a-bc82-3f9bececde1c" name="Response Codes 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="65c2f8f9-3b29-495c-9162-68730c4829fc" name="Response Content-Type header is application/fhir+json"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["Content-Type"]).get(0).contains("application/fhir+json")</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="d680c5d8-8acc-44e4-b2ec-b2e4bed272b0" name="Response Resource type is Bundle"><con:configuration><path>resourceType</path><content>Bundle</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ff5ec4b2-5c0e-492d-b8d9-4ffb4e454d56" name="Response body conforms FHIR bundle-profile"><con:configuration><scriptText>true</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="72c86827-e2d2-4d1c-b263-8c2d6c800526" name="Response Bundle/type is searchset"><con:configuration><path>type</path><content>searchset</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="e395928b-def3-4517-a8da-68401f2a7d39" name="Response Bundle/total > 0"><con:configuration><scriptText>import net.sf.json.groovy.JsonSlurper
def parser = new JsonSlurper()
def result = parser.parseText(context.response)
def total = result.total as int
assert total > 0</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6275e9d7-c4b4-4075-94b7-807fa3cbe84d" name="Response  Bundle/total >= entry.count()"><con:configuration><scriptText>import net.sf.json.groovy.JsonSlurper
def parser = new JsonSlurper()
def result = parser.parseText(context.response)
def total = result.total as int
def entries = (List)result.entry
assert total >= entries.size()</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="581fa0a8-9e63-4191-8a9e-9ef20064a34a" name="Response contains patient-update-peterchalmers-min"><con:configuration><scriptText>import groovy.json.*

def respJson = context.parser.parseText(messageExchange.response.responseContent)
assert respJson instanceof Map : "Json resource expected in response."
def bundleEntry = respJson.get("entry")
assert bundleEntry!=null
assert bundleEntry instanceof List
assert bundleEntry.size() > 0
def entry = bundleEntry.get(0)
assert entry!=null
def returnedResource = entry.get("resource")
assert returnedResource!=null
assert context.resourceContains("RESOURCE.TEMPLATE.BASE.DIR", "PT01INTRO.PT.UPDATE.PETERCHALMERS.MIN.JSON", returnedResource)
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="given" value="Peter${#Project#C8}"/>
  <con:entry key="family" value="Chalmers${#Project#C8}"/>
</con:parameters><con:parameterOrder><con:entry>#Project#Service.Resource.Path</con:entry><con:entry>family</con:entry><con:entry>given</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Step5.1-DeletePatient" id="6d4d2db1-6a67-4fba-9229-72a0c805d6ff"><con:settings/><con:config service="FHIR4-0-0-Connectathon20-Patient-01-Intro" resourcePath="/${#Project#Service.Resource.Path}/${#Project#CD16}" methodName="DeletePatient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Step5.1-DeletePatient" id="c499e719-154b-4c90-832a-cb589b399159" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request/><con:originalUri>http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com/frt-fhir-rest/1.0/Patient/CREATE-PT-0001</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b7fc9b43-ff4c-4232-8a82-94166650db19" name="HTTP Return Code 200 or 204 or 404"><con:configuration><codes>200,204,404</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ea4480ef-10a7-43a1-b1c8-97e076b8482f" name="Response ETag header presents"><con:configuration><scriptText>assert messageExchange.responseHeaders["ETag"] != null</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Step5.2-ReadPatientAfterDelete" id="da788ea1-52ac-44c9-b277-45cffeeaacbd"><con:settings/><con:config service="FHIR4-0-0-Connectathon20-Patient-01-Intro" resourcePath="/${#Project#Service.Resource.Path}/${#Project#CD16}" methodName="RetrievePatient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Step5.2-ReadPatientAfterDelete" id="7d61567d-4079-4fe3-8c2b-27e2736dfca6" mediaType="application/fhir+json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Service.Local.Endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost//frt-fhir-rest/1.0/Patient/CREATE-PT-ID-PUT</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="aa999ceb-a2de-416b-bdc5-fd5180d9ac19" name="Response Codes is Gone"><con:configuration><codes>404,410</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:setupScript><![CDATA[import groovy.json.*
import org.apache.commons.lang.RandomStringUtils

// random seeding template properties
context.seededProperties=[:]
def propNames = testRunner.testCase.project.propertyNames
for(n in propNames)
{
	log.info( "property name=" + n + ", value=" + testRunner.testCase.project.properties[n].value )
	def group=(n =~ /([CD]+)(\d+)/)
	log.info("group:" + group)
	log.info("group count:" + group.count)
	if (group.hasGroup()&&group.size()==1) {
		def seededValue = ''
		if (group[0].size()==3) {
			def alpha=group[0][1]
			def num=group[0][2]
			//log.info("alpha=" + alpha + ", num=" + num)
			def pattn='\\$\\{#Project#' + n + '\\}'
			//def propName='${#Project#'+n+'}'
			if (alpha=='C') {
				seededValue=RandomStringUtils.randomAlphabetic(num.toInteger())
			}
			else if (alpha=='D') {
				seededValue=RandomStringUtils.randomNumeric(num.toInteger())
			}
			else if (alpha=='CD') {
				seededValue=RandomStringUtils.randomAlphanumeric(num.toInteger())
			}
			if (seededValue!='') {
				context.seededProperties.put(pattn, seededValue)
				testRunner.testCase.project.setPropertyValue(n, seededValue)
			}
		}
	}
	else {
		log.info("Not a json template property, property skipped.")
	}
}

context.seededProperties.each {
	k, v ->
	log.info "$k :: $v"
}

context.genBoundedString={len ->
	def array = new byte[len]
	new java.util.Random().nextBytes(array)
	def str = new java.lang.String(array)
	return str
}

log.info("random string of len 16: " + RandomStringUtils.randomAlphabetic(16))

context.valueIdentical={v1, v2 ->
	log.info("OBJ1="+v1)
	log.info("OBJ2="+v2)
	def isIdentical=true
	if (v1!=null&&v2!=null) {
		log.info("Compare V1 V2: ")
		log.info("V1:::::" + v1)
		log.info("V2:::::" + v2)
		if (v1 instanceof List) {
			isIdentical=context.listIdentical(v1, v2)
		}
		else if (v1 instanceof Map) {
			isIdentical=context.mapIdentical(v1, v2)
		}
		else {
			// must be a primitive Int, Str
			log.info("Compare values : V1[" + v1 + "]==V2[" + v2 + "]")
			isIdentical=(v1==v2)
		}
	}
	else if (v1!=null||v2!=null) {
		isIdentical=false
	}
	return isIdentical
}
context.listIdentical={l1, l2 ->
     def isIdentical=true
	if (l1.size()==l2.size()) {
		isIdentical=context.listContains(l1, l2)&&context.listContains(l2, l1)
	}
	else {
		isIdentical=false
	}
	return isIdentical
}
context.listContains={l1, l2 ->
	def isContained = true
	if (l2.size()>=l1.size()) {
		def l = []
		for (e1 in l1) {
			def found = false;
			for (e2 in l2) {
				if (context.valueIdentical(e1, e2)) {
					l2.remove(e2)
					l.add(e2)
					found = true
					break;
				}
			}
			if (!found) {
				isContained = false
				break
			}
		}
		l2.addAll(l)
	}
	else {
		isContained = false
	}
	return isContained
}

context.mapIdentical={m1, m2 ->
     def isIdentical = false
	if (m1.size()==m2.size()) {
		isIdentical=context.mapContains(m1, m2)&&context.mapContains(m2, m1)	
	}
	return isIdentical
}

context.mapContains={m1, m2 ->
	log.info("m1="+m1)
	log.info("m2="+m2)
	log.info("m1.type=" + m1.type + ", m2.type" + m2.type)
	def isContained = true
	if (m2.size()>=m1.size()) {
		log.info("m1.size=" + m1.size() + ", m2.size=" + m2.size())
		for (e1 in m1) { 
	  		log.info "MAP1 K : V => ${e1.key} : ${e1.value}"
	  		def v2 = m2.get(e1.key)
	  		if (v2!=null) {
	  			log.info("MAP2 VALUE= $v2")
	  			if (!context.valueIdentical(e1.value, v2)) {
	  				isContained = false
	  				break
	  			}
	  		}
	  		else {
	  			isContained = false
	  			break
	  		}
		}
	}
	else {
		isContained = false
	}
	return isContained
}
context.parser = new JsonSlurper()
context.resourceContains={baseDirProp, pathProp, resp ->
	def projectPath = new com.eviware.soapui.support.GroovyUtils(context).projectPath
	log.info "ProjectPath:"+projectPath
	def baseDir = testRunner.testCase.project.properties[baseDirProp].value
	def path = testRunner.testCase.project.properties[pathProp].value
	def jsonFile = new File(projectPath, baseDir+path)
	assert jsonFile!=null
	def jsonTemplate = jsonFile.text
	assert jsonTemplate!=null
	log.info("json template:" + jsonTemplate)
	//log.info "iterate project properties================="
	//def projPropNames = testRunner.testCase.project.propertyNames
	def target=jsonTemplate
	//for(n in projPropNames)
	//{
//		log.info( "property name=" + n + ", value=" + testRunner.testCase.project.properties[n].value )
//		if (n.startsWith("C")||n.startsWith("D")) {
//			def pattern1='\\$\\{#Project#' + n + '\\}'
//			def propName='${#Project#'+n+'}'
//			target=target.replaceAll(pattern1, context.expand(propName))
//		}
//	}
	context.seededProperties.each {k, v ->
		target=target.replaceAll(k, v)
	}

	log.info("resolved json template:" + target)
	def min=context.parser.parseText(target)
	// note, resource is a Map
	log.info("min="+min)
	log.info("resp="+resp)
	log.info("min.type=" + min.type + ", resp.type" + resp.type)
	log.info("min is Map:" + (min instanceof Map) + ", is List:" + (min instanceof List))
	log.info("resp is Map:" + (resp instanceof Map) + ", is List:" + (resp instanceof List))
	return context.mapContains(min, resp)
}

]]></con:setupScript><con:properties/></con:testCase><con:properties/></con:testSuite><con:properties><con:property><con:name>CD16</con:name><con:value>9Iyx8H3F67VIYr7v</con:value></con:property><con:property><con:name>C8</con:name><con:value>jxXKBfhj</con:value></con:property><con:property><con:name>C9</con:name><con:value>TumUzwsCz</con:value></con:property><con:property><con:name>D4</con:name><con:value>9425</con:value></con:property><con:property><con:name>Service.Remote.Endpoint</con:name><con:value>http://ec2-54-202-187-87.us-west-2.compute.amazonaws.com:8088</con:value></con:property><con:property><con:name>Service.Resource.Path</con:name><con:value>/frt-fhir-rest/1.0/Patient</con:value></con:property><con:property><con:name>Service.Local.Endpoint</con:name><con:value>http://localhost:8080</con:value></con:property><con:property><con:name>CD13</con:name><con:value>3DJZpkopP2Y6t</con:value></con:property><con:property><con:name>D1</con:name><con:value>8</con:value></con:property><con:property><con:name>D3</con:name><con:value>515</con:value></con:property><con:property><con:name>D7</con:name><con:value>9222070</con:value></con:property><con:property><con:name>C6</con:name><con:value>DrniTc</con:value></con:property><con:property><con:name>createResourceId</con:name><con:value>X7gJKcMAxItnHF4q</con:value></con:property><con:property><con:name>RESOURCE.TEMPLATE.BASE.DIR</con:name><con:value>src/test/messages/fhir4-0-0-connectathon20/</con:value></con:property><con:property><con:name>PT01BONUS.PT.CREATE.BONUS.PETERCHALMERS.JSON</con:name><con:value>patient-01-bonus/patient-create-bonus-peterchalmers.json</con:value></con:property><con:property><con:name>PT01BONUS.PT.CREATE.BONUS.PETERCHALMERS.MIN.JSON</con:name><con:value>patient-01-bonus/patient-create-bonus-peterchalmers-min.json</con:value></con:property><con:property><con:name>PT01BONUS.PT.UPDATE.BONUS1.PETERCHALMERS.JSON</con:name><con:value>patient-01-bonus/patient-update-bonus1-peterchalmers.json</con:value></con:property><con:property><con:name>PT01BONUS.PT.UPDATE.BONUS1.PETERCHALMERS.MIN.JSON</con:name><con:value>patient-01-bonus/patient-update-bonus1-peterchalmers-min.json</con:value></con:property><con:property><con:name>PT01BONUS.PT.UPDATE.BONUS2.PETERCHALMERS.JSON</con:name><con:value>patient-01-bonus/patient-update-bonus2-peterchalmers.json</con:value></con:property><con:property><con:name>PT01BONUS.PT.UPDATE.BONUS2.PETERCHALMERS.MIN.JSON</con:name><con:value>patient-01-bonus/patient-update-bonus2-peterchalmers-min.json</con:value></con:property><con:property><con:name>PT02FORMAL.PT.CREATE.CLIENT.ID.JSON</con:name><con:value>patient-02-formal-fhirserver/patient-create-client-id.json</con:value></con:property><con:property><con:name>PT02FORMAL.PT.UPDATE.CLIENT.ID.JSON</con:name><con:value>patient-02-formal-fhirserver/patient-update-client-id.json</con:value></con:property><con:property><con:name>PT01INTRO.PT.CREATE.CLIENT.ID.PETERCHALMERS.JSON</con:name><con:value>patient-01-intro/patient-create-client-id-peterchalmers.json</con:value></con:property><con:property><con:name>PT01INTRO.PT.CREATE.PETERCHALMERS.MIN.JSON</con:name><con:value>patient-01-intro/patient-create-peterchalmers-min.json</con:value></con:property><con:property><con:name>PT01INTRO.PT.CREATE.SERVER.ID.PETERCHALMERS.JSON</con:name><con:value>patient-01-intro/patient-create-server-id-peterchalmers.json</con:value></con:property><con:property><con:name>PT01INTRO.PT.UPDATE.PETERCHALMERS.JSON</con:name><con:value>patient-01-intro/patient-update-peterchalmers.json</con:value></con:property><con:property><con:name>PT01INTRO.PT.UPDATE.PETERCHALMERS.MIN.JSON</con:name><con:value>patient-01-intro/patient-update-peterchalmers-min.json</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>